"use strict";(self.webpackChunkwaste_and_downtime_dashboard=self.webpackChunkwaste_and_downtime_dashboard||[]).push([[640],{2640:(e,s,a)=>{a.r(s),a.d(s,{default:()=>Y});var t=a(7051),n=a(5043),i=a(8163),c=a(6446),l=a(9570),r=a(6820),o=a(3113),d=a(579);const m=e=>{let{operatorName:s,setOperatorName:a,machine:t,setMachine:n,orderNumber:i,setOrderNumber:c,product:l,setProduct:r,batchNumber:o,setBatchNumber:m,hideMachine:u=!1,disabled:h=!1}=e;return(0,d.jsxs)("div",{className:"main-form-fields",children:[(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsx)("label",{htmlFor:"operatorNumber",className:"form-label",children:"Operator Number"}),(0,d.jsx)("input",{type:"text",className:"form-input",id:"operatorNumber",value:s,onChange:e=>a(e.target.value),placeholder:"Enter operator number (e.g., 042)",disabled:h})]}),!u&&(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsx)("label",{htmlFor:"machine",className:"form-label",children:"Machine"}),(0,d.jsx)("input",{type:"text",className:"form-input",id:"machine",value:t,readOnly:!0,disabled:h})]}),(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsx)("label",{htmlFor:"orderNumber",className:"form-label",children:"Order Number"}),(0,d.jsx)("input",{type:"text",className:"form-input",id:"orderNumber",value:i,onChange:e=>c(e.target.value),placeholder:"Enter order number",disabled:h})]}),(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsx)("label",{htmlFor:"product",className:"form-label",children:"Product"}),(0,d.jsx)("input",{type:"text",className:"form-input",id:"product",value:l,onChange:e=>r(e.target.value),placeholder:"Enter product name",disabled:h})]}),(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsx)("label",{htmlFor:"batchNumber",className:"form-label",children:"Batch Number"}),(0,d.jsx)("input",{type:"text",className:"form-input",id:"batchNumber",value:o,onChange:e=>m(e.target.value),placeholder:"Enter batch number",disabled:h})]})]})};var u=a(108),h=a(2291),p=a(7734),x=a(2185),N=a(6026),j=a(6150),b=a(8643),g=a(163),v=a(4240),f=a(7869);const y=["#f87171","#fbbf24","#34d399","#60a5fa","#a78bfa","#f472b6"],w=e=>{let{message:s,icon:a}=e;return(0,d.jsxs)("div",{className:"chart-empty-state",children:[(0,d.jsx)("span",{className:"empty-icon",children:a}),(0,d.jsx)("span",{className:"empty-text",children:s})]})},S=e=>{let{wasteEntries:s,downtimeEntries:a}=e;const t=s.reduce((e,s)=>{const a=e.find(e=>e.name===s.wasteType);return a?a.value+=s.waste:e.push({name:s.wasteType,value:s.waste}),e},[]),n=a.reduce((e,s)=>{const a=e.find(e=>e.name===s.downtimeReason);return a?a.value+=s.downtime:e.push({name:s.downtimeReason,value:s.downtime}),e},[]);return(0,d.jsxs)("div",{className:"charts-grid",children:[(0,d.jsxs)("div",{className:"chart-container",children:[(0,d.jsx)("h4",{className:"chart-title",children:"Waste by Type"}),0===t.length?(0,d.jsx)(w,{message:"No waste entries yet",icon:"\ud83d\udcca"}):(0,d.jsx)("div",{className:"chart-wrapper",children:(0,d.jsx)(u.u,{width:"100%",height:180,children:(0,d.jsxs)(h.E,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[(0,d.jsx)(p.d,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.1)"}),(0,d.jsx)(x.W,{dataKey:"name",tick:{fill:"#94a3b8",fontSize:11},axisLine:{stroke:"rgba(148,163,184,0.2)"},tickLine:!1}),(0,d.jsx)(N.h,{tick:{fill:"#94a3b8",fontSize:11},axisLine:{stroke:"rgba(148,163,184,0.2)"},tickLine:!1}),(0,d.jsx)(j.m,{contentStyle:{background:"rgba(30,41,59,0.95)",border:"1px solid rgba(148,163,184,0.2)",borderRadius:"8px",color:"#f8fafc"}}),(0,d.jsx)(b.y,{dataKey:"value",fill:"#f87171",name:"Waste (kg)",radius:[4,4,0,0]})]})})})]}),(0,d.jsxs)("div",{className:"chart-container",children:[(0,d.jsx)("h4",{className:"chart-title",children:"Downtime by Reason"}),0===n.length?(0,d.jsx)(w,{message:"No downtime entries yet",icon:"\u23f1\ufe0f"}):(0,d.jsxs)("div",{className:"chart-wrapper",children:[(0,d.jsx)(u.u,{width:"100%",height:180,children:(0,d.jsxs)(g.r,{children:[(0,d.jsx)(v.F,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percent:a}=e;return a>.1?"".concat((100*a).toFixed(0),"%"):""},outerRadius:65,innerRadius:35,fill:"#8884d8",dataKey:"value",stroke:"rgba(15,23,42,0.5)",strokeWidth:2,children:n.map((e,s)=>(0,d.jsx)(f.f,{fill:y[s%y.length]},"cell-".concat(s)))}),(0,d.jsx)(j.m,{contentStyle:{background:"rgba(30,41,59,0.95)",border:"1px solid rgba(148,163,184,0.2)",borderRadius:"8px",color:"#f8fafc"},formatter:e=>["".concat(e," min"),"Duration"]})]})}),(0,d.jsx)("div",{className:"chart-legend",children:n.map((e,s)=>(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("span",{className:"legend-dot",style:{background:y[s%y.length]}}),(0,d.jsx)("span",{className:"legend-label",children:e.name})]},e.name))})]})]})]})};var C=a(6353),k=a(9355);const _=e=>{let{isOpen:s,onClose:a,onScan:t,recentScans:i=[]}=e;const[r,o]=(0,n.useState)(null),[,m]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[p,x]=(0,n.useState)(!1),N=(0,n.useRef)(null),j=(0,n.useRef)(null),b=(0,n.useRef)(s);(0,n.useEffect)(()=>{b.current=s},[s]),(0,n.useEffect)(()=>{if(s&&j.current){const e=setTimeout(()=>{v()},100);return()=>clearTimeout(e)}return()=>{g()}},[s]);const g=async()=>{if(N.current){try{N.current.getState()===k.Qq.SCANNING&&await N.current.stop(),N.current.clear()}catch(e){console.error("Error stopping scanner:",e)}N.current=null}m(!1)},v=async()=>{N.current&&await g();try{o(null),m(!0);const e=new k.j9("qr-reader");N.current=e,await e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},e=>{f(e)},()=>{})}catch(e){console.error("QR Scanner error:",e),m(!1),e.toString().includes("NotAllowedError")?o("Camera permission denied. Please allow camera access to scan QR codes."):e.toString().includes("NotFoundError")?o("No camera found. Please ensure your device has a camera."):o("Failed to start scanner: ".concat(e.message||e))}},f=async e=>{if(u!==e){if(i.includes(e))return o('Pallet "'.concat(e,'" was already scanned this session!')),void setTimeout(()=>o(null),3e3);h(e),x(!0),navigator.vibrate&&navigator.vibrate(200),await g(),t(e),setTimeout(()=>{x(!1),h(null),s&&v()},1500)}},y=()=>{g(),a()};return s?(0,d.jsx)(l.N,{children:(0,d.jsx)(c.P.div,{className:"qr-scanner-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:y,children:(0,d.jsxs)(c.P.div,{className:"qr-scanner-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"qr-scanner-header",children:[(0,d.jsxs)("h3",{children:[(0,d.jsx)("span",{className:"scanner-icon",children:"\ud83d\udcf7"}),"Scan Pallet QR Code"]}),(0,d.jsx)("button",{className:"qr-close-btn",onClick:y,children:"\u2715"})]}),(0,d.jsxs)("div",{className:"qr-scanner-body",ref:j,children:[(0,d.jsx)(l.N,{children:p&&(0,d.jsxs)(c.P.div,{className:"scan-success-overlay",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:[(0,d.jsx)("div",{className:"success-checkmark",children:"\u2713"}),(0,d.jsx)("p",{children:"Pallet Scanned!"}),(0,d.jsx)("span",{className:"scanned-code",children:u})]})}),r&&(0,d.jsxs)("div",{className:"qr-error-message",children:[(0,d.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),r]}),(0,d.jsx)("div",{id:"qr-reader",className:"qr-reader-container"}),(0,d.jsxs)("div",{className:"qr-instructions",children:[(0,d.jsx)("p",{children:"Position the QR code within the frame"}),i.length>0&&(0,d.jsxs)("span",{className:"scan-count",children:[i.length," pallets scanned this shift"]})]})]}),(0,d.jsx)("div",{className:"qr-scanner-footer",children:(0,d.jsx)("button",{className:"qr-cancel-btn",onClick:y,children:"Done Scanning"})})]})})}):null};var R=a(6451),E=a(1737),P=a(8283),A=a(6316),T=a(9216),O=a(1187),D=a(6886),M=a(3986);const I=["variant","size","icon","iconPosition","loading","fullWidth","disabled","children","className"],q=e=>{let{variant:s="primary",size:a="md",icon:n,iconPosition:i="left",loading:c=!1,fullWidth:l=!1,disabled:r,children:o,className:m=""}=e,u=(0,M.A)(e,I);const h=r||c;return(0,d.jsxs)("button",(0,t.A)((0,t.A)({className:"mc-btn mc-btn--".concat(s," mc-btn--").concat(a," ").concat(l?"mc-btn--full":""," ").concat(m),disabled:h},u),{},{children:[c&&(0,d.jsxs)("span",{className:"mc-btn__loader",children:[(0,d.jsx)("span",{className:"mc-btn__loader-dot"}),(0,d.jsx)("span",{className:"mc-btn__loader-dot"}),(0,d.jsx)("span",{className:"mc-btn__loader-dot"})]}),!c&&n&&"left"===i&&(0,d.jsx)("span",{className:"mc-btn__icon",children:n}),(0,d.jsx)("span",{className:"mc-btn__text",children:o}),!c&&n&&"right"===i&&(0,d.jsx)("span",{className:"mc-btn__icon",children:n})]}))},W=e=>{let{isOpen:s,onClose:a,title:t,subtitle:i,size:r="md",children:o,footer:m,closeOnOverlay:u=!0,showCloseButton:h=!0}=e;return(0,n.useEffect)(()=>(document.body.style.overflow=s?"hidden":"",()=>{document.body.style.overflow=""}),[s]),(0,n.useEffect)(()=>{const e=e=>{"Escape"===e.key&&s&&a()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,a]),(0,d.jsx)(l.N,{children:s&&(0,d.jsxs)(c.P.div,{className:"mc-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:u?a:void 0,children:[(0,d.jsx)("div",{className:"mc-modal-scanlines"}),(0,d.jsxs)(c.P.div,{className:"mc-modal mc-modal--".concat(r),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:[.4,0,.2,1]},onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:"mc-modal__corner mc-modal__corner--tl"}),(0,d.jsx)("div",{className:"mc-modal__corner mc-modal__corner--tr"}),(0,d.jsx)("div",{className:"mc-modal__corner mc-modal__corner--bl"}),(0,d.jsx)("div",{className:"mc-modal__corner mc-modal__corner--br"}),(t||h)&&(0,d.jsxs)("div",{className:"mc-modal__header",children:[(0,d.jsx)("div",{className:"mc-modal__header-content",children:t&&(0,d.jsxs)("div",{className:"mc-modal__title-group",children:[(0,d.jsx)("h2",{className:"mc-modal__title",children:t}),i&&(0,d.jsx)("p",{className:"mc-modal__subtitle",children:i})]})}),h&&(0,d.jsx)("button",{className:"mc-modal__close",onClick:a,"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),(0,d.jsx)("div",{className:"mc-modal__body",children:o}),m&&(0,d.jsx)("div",{className:"mc-modal__footer",children:m})]})]})})},L=e=>{let{label:s,id:a,type:t="text",value:n,onChange:i,placeholder:c,disabled:l=!1,readOnly:r=!1,required:o=!1,error:m,hint:u,icon:h,className:p=""}=e;return(0,d.jsxs)("div",{className:"mc-field ".concat(m?"mc-field--error":""," ").concat(l?"mc-field--disabled":""," ").concat(p),children:[(0,d.jsxs)("label",{htmlFor:a,className:"mc-field__label",children:[s,o&&(0,d.jsx)("span",{className:"mc-field__required",children:"*"})]}),(0,d.jsxs)("div",{className:"mc-field__input-wrapper",children:[h&&(0,d.jsx)("span",{className:"mc-field__icon",children:h}),(0,d.jsx)("input",{type:t,id:a,className:"mc-field__input ".concat(h?"mc-field__input--with-icon":""),value:n,onChange:e=>i(e.target.value),placeholder:c,disabled:l,readOnly:r,required:o}),(0,d.jsx)("div",{className:"mc-field__glow"})]}),m&&(0,d.jsx)("span",{className:"mc-field__error",children:m}),u&&!m&&(0,d.jsx)("span",{className:"mc-field__hint",children:u})]})};const F=e=>{let{isOpen:s,onClose:a,machineId:t,machineName:i,onOrderAdded:c}=e;const[l,r]=(0,n.useState)(""),[o,m]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[N,j]=(0,n.useState)(""),b=()=>{r(""),m(""),h(""),j(""),a()};return(0,d.jsx)(W,{isOpen:s,onClose:b,title:"Add New Order",subtitle:i,size:"md",footer:(0,d.jsxs)("div",{className:"mc-add-order__actions",children:[(0,d.jsx)(q,{variant:"ghost",onClick:b,disabled:p,children:"Cancel"}),(0,d.jsx)(q,{variant:"success",onClick:async()=>{if(l.trim())if(o.trim()){x(!0),j("");try{await(0,E.z8)(t,l.trim(),o.trim(),u.trim()||""),c({orderNumber:l.trim(),product:o.trim(),batchNumber:u.trim()}),r(""),m(""),h(""),a()}catch(e){console.error("Failed to add order:",e),j("Failed to add order. Please try again.")}finally{x(!1)}}else j("Product is required");else j("Order number is required")},loading:p,children:"Add Order & Start"})]}),children:(0,d.jsxs)("div",{className:"mc-add-order",children:[(0,d.jsx)("p",{className:"mc-add-order__description",children:"Create a new order for this machine. The order will be added to the queue and automatically selected."}),N&&(0,d.jsxs)("div",{className:"mc-add-order__error",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("path",{d:"M12 8v4M12 16h.01"})]}),N]}),(0,d.jsxs)("div",{className:"mc-add-order__form",children:[(0,d.jsx)(L,{label:"Order Number",id:"order-number",value:l,onChange:r,placeholder:"e.g., ORD-2024-001",required:!0,disabled:p}),(0,d.jsx)(L,{label:"Product",id:"product",value:o,onChange:m,placeholder:"e.g., Product A",required:!0,disabled:p}),(0,d.jsx)(L,{label:"Batch Number",id:"batch-number",value:u,onChange:h,placeholder:"e.g., BATCH-001 (optional)",disabled:p})]}),(0,d.jsxs)("div",{className:"mc-add-order__hint",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("path",{d:"M12 16v-4M12 8h.01"})]}),(0,d.jsx)("span",{children:"Orders can also be added in bulk from the Admin Console."})]})]})})},B=(e,s,a)=>"shift_session_".concat(e,"_").concat(s,"_").concat(a),Y=()=>{const{machineId:e}=(0,i.g)(),s=(0,i.zy)(),u=(0,i.Zp)(),h=(()=>{var a;const t="capture_machine_name_".concat(e),n=null===(a=s.state)||void 0===a?void 0:a.machineName;if(n)return sessionStorage.setItem(t,n),n;const i=sessionStorage.getItem(t);return i||(e||"")})();(0,n.useEffect)(()=>(h&&localStorage.setItem("chat_current_machine",h),()=>{localStorage.removeItem("chat_current_machine")}),[h]);const[p,x]=(0,n.useState)(new Date),[N,j]=(0,n.useState)(""),[b,g]=(0,n.useState)(!1),[v,f]=(0,n.useState)(null),[y,w]=(0,n.useState)(!1),[k,M]=(0,n.useState)(""),[I,q]=(0,n.useState)(""),[W,L]=(0,n.useState)(""),[Y,z]=(0,n.useState)(""),[H,J]=(0,n.useState)(!1),[Q,K]=(0,n.useState)(""),[G,V]=(0,n.useState)(""),[U,Z]=(0,n.useState)(""),[$,X]=(0,n.useState)(""),[ee,se]=(0,n.useState)([]),[ae,te]=(0,n.useState)([]),[ne,ie]=(0,n.useState)([]),[ce,le]=(0,n.useState)([]),[re,oe]=(0,n.useState)([]),[de,me]=(0,n.useState)([]),[ue,he]=(0,n.useState)(!1),[pe,xe]=(0,n.useState)(!1),[Ne,je]=(0,n.useState)(!1),[be,ge]=(0,n.useState)(!1),[ve,fe]=(0,n.useState)(!1),[ye,we]=(0,n.useState)(!1),[Se,Ce]=(0,n.useState)(""),[ke,_e]=(0,n.useState)(""),[Re,Ee]=(0,n.useState)(""),[Pe,Ae]=(0,n.useState)(""),[Te,Oe]=(0,n.useState)(!1),[,De]=(0,n.useState)(""),[Me,Ie]=(0,n.useState)([]),[qe,We]=(0,n.useState)(!1),[Le,Fe]=(0,n.useState)(!1),[Be,Ye]=(0,n.useState)(null),[ze,He]=(0,n.useState)(!1),[Je,Qe]=(0,n.useState)(""),[Ke,Ge]=(0,n.useState)(!1),[Ve,Ue]=(0,n.useState)(null),[Ze,$e]=(0,n.useState)(null),[Xe,es]=(0,n.useState)({isRunning:!1,startTime:null,pausedAt:null,totalRunTimeMs:0,lastResumedAt:null}),[ss,as]=(0,n.useState)("00:00:00"),[ts,ns]=(0,n.useState)(!1),[is,cs]=(0,n.useState)(""),ls=(e,s)=>{f({message:e,type:s}),setTimeout(()=>f(null),4e3)},[rs,os]=(0,n.useState)(null),ds=(0,n.useRef)(null),ms=(0,n.useCallback)(e=>{const s=(0,T.hJ)(e);Oe(s.isInWindow),De(s.isInWindow?"":s.timeToWindow)},[]),us=(0,n.useCallback)(async()=>{const e=(new Date).toISOString().split("T")[0],s=(0,T.Se)(),t=B(h,s,e),{hasConflict:n,activeSession:i}=await(0,O.mU)(h,s,e);n&&i&&(os("Machine in use by ".concat(i.operator_name," since ").concat(new Date(i.started_at).toLocaleTimeString())),(0,D.I9)("This machine is currently being used by ".concat(i.operator_name)));const c=await(0,O.Bd)(h,s,e);c&&(es({isRunning:c.isRunning,startTime:c.startTime?new Date(c.startTime):null,pausedAt:c.pausedAt?new Date(c.pausedAt):null,totalRunTimeMs:c.totalRunTimeMs,lastResumedAt:c.lastResumedAt?new Date(c.lastResumedAt):null}),(c.isRunning||c.totalRunTimeMs>0)&&as((0,O.cI)((0,O.Qt)(c))));const l=localStorage.getItem(t);if(l)try{const e=JSON.parse(l);if(e.locked)return M(e.operatorName),q(e.orderNumber),L(e.product),z(e.batchNumber),J(!0),e.wasteEntries&&se(e.wasteEntries),e.downtimeEntries&&te(e.downtimeEntries),e.speedEntries&&ie(e.speedEntries),e.sachetMassEntries&&le(e.sachetMassEntries),e.looseCasesEntries&&oe(e.looseCasesEntries),void(e.palletScanEntries&&me(e.palletScanEntries))}catch(o){console.error("Failed to load session:",o)}try{const{fetchLiveSessionByMachine:n}=await Promise.resolve().then(a.bind(a,6316)),i=await n(h,s,e);if(i&&i.is_locked){M(i.operator_name),q(i.order_number),L(i.product),z(i.batch_number),J(!0);const e={machineName:i.machine_name,operatorName:i.operator_name,orderNumber:i.order_number,product:i.product,batchNumber:i.batch_number,shift:i.shift,date:i.session_date,locked:!0,wasteEntries:[],downtimeEntries:[],speedEntries:[],sachetMassEntries:[],looseCasesEntries:[],palletScanEntries:[]};return localStorage.setItem(t,JSON.stringify(e)),void console.log("\ud83d\udccb Session restored from Supabase:",h)}}catch(o){console.error("Failed to restore session from Supabase:",o)}try{const{fetchActiveOrderDetails:e}=await Promise.resolve().then(a.bind(a,1737)),s=await e();if(s)return q(s.order_number),L(s.product),void z(s.batch_number)}catch(o){console.error("Failed to load from database:",o)}const r=localStorage.getItem("admin_order_details");if(r)try{const e=JSON.parse(r);e.orderNumber&&q(e.orderNumber),e.product&&L(e.product),e.batchNumber&&z(e.batchNumber)}catch(o){console.error("Failed to load admin order details:",o)}},[h]),hs=(0,n.useCallback)(async function(){let s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!k||!I||!W||!Y)return;const a=(new Date).toISOString().split("T")[0],t=(0,T.Se)(),n=B(h,t,a),i=await(0,O.gS)(h,k,t,a);if(!i.success)return void(0,D.Qg)(i.error||"Failed to acquire session lock");ds.current&&ds.current(),ds.current=(0,O.BO)(h,t,a,e=>{os("Another user (".concat(e.operator_name,") is accessing this machine"))});const c={machineName:h,operatorName:k,orderNumber:I,product:W,batchNumber:Y,shift:t,date:a,locked:!0,wasteEntries:ee,downtimeEntries:ae,speedEntries:ne,sachetMassEntries:ce,looseCasesEntries:re,palletScanEntries:de};localStorage.setItem(n,JSON.stringify(c));const l=ee.reduce((e,s)=>e+s.waste,0),r=ae.reduce((e,s)=>e+s.downtime,0);if((0,A.WA)({machineName:h,operatorName:k,orderNumber:I,product:W,batchNumber:Y,shift:t,date:a,locked:!0,totalWaste:l,totalDowntime:r}),!H){J(!0);const n=new Date;es({isRunning:!0,startTime:n,pausedAt:null,totalRunTimeMs:0,lastResumedAt:n}),as("00:00:00");const i={isRunning:!0,startTime:n.toISOString(),pausedAt:null,totalRunTimeMs:0,lastResumedAt:n.toISOString(),pauseHistory:[]};(0,O.Af)(h,t,a,i),e&&(0,E.LY)(e,"running",k,I,t),s&&ls("Session locked - Production timer started","success")}},[h,k,I,W,Y,ee,ae,ne,ce,re,de,H,e]);(0,n.useEffect)(()=>{us()},[us]);const ps=(0,n.useRef)(Xe);(0,n.useEffect)(()=>{ps.current=Xe},[Xe]),(0,n.useEffect)(()=>{if(!Xe.isRunning||!H)return;const e=setInterval(()=>{var e,s,a;const t=(new Date).toISOString().split("T")[0],n=(0,T.Se)(),i={isRunning:Xe.isRunning,startTime:(null===(e=Xe.startTime)||void 0===e?void 0:e.toISOString())||null,pausedAt:(null===(s=Xe.pausedAt)||void 0===s?void 0:s.toISOString())||null,totalRunTimeMs:Xe.totalRunTimeMs,lastResumedAt:(null===(a=Xe.lastResumedAt)||void 0===a?void 0:a.toISOString())||null,pauseHistory:[]};(0,O.Af)(h,n,t,i)},3e4);return()=>clearInterval(e)},[Xe.isRunning,Xe.lastResumedAt,Xe.totalRunTimeMs,H,h]),(0,n.useEffect)(()=>()=>{const e=(new Date).toISOString().split("T")[0],s=(0,T.Se)(),a=ps.current;if(a.isRunning||a.totalRunTimeMs>0){var t,n,i;const c={isRunning:a.isRunning,startTime:(null===(t=a.startTime)||void 0===t?void 0:t.toISOString())||null,pausedAt:(null===(n=a.pausedAt)||void 0===n?void 0:n.toISOString())||null,totalRunTimeMs:a.totalRunTimeMs,lastResumedAt:(null===(i=a.lastResumedAt)||void 0===i?void 0:i.toISOString())||null,pauseHistory:[]};(0,O.Af)(h,s,e,c)}(0,O.BA)(h,s,e),ds.current&&ds.current()},[h]),(0,n.useEffect)(()=>{(async()=>{if(e)try{const s=await(0,E.Vw)(e);Ie(s)}catch(s){console.error("Failed to load machine orders:",s)}})()},[e]),(0,n.useEffect)(()=>{if(H&&k&&I&&W&&Y){const e=(new Date).toISOString().split("T")[0],s=(0,T.Se)(),a=B(h,s,e),t={machineName:h,operatorName:k,orderNumber:I,product:W,batchNumber:Y,shift:s,date:e,locked:!0,wasteEntries:ee,downtimeEntries:ae,speedEntries:ne,sachetMassEntries:ce,looseCasesEntries:re,palletScanEntries:de};localStorage.setItem(a,JSON.stringify(t))}},[ee,ae,ne,ce,re,de,H,h,k,I,W,Y]),(0,n.useEffect)(()=>{const e=setInterval(()=>{const e=new Date;x(e),ms(e)},1e3),s=(0,T.Se)();return null!==Be&&Be!==s&&H&&He(!0),j(s),Ye(s),()=>clearInterval(e)},[p,T.hJ,Be,H]),(0,n.useEffect)(()=>{if(!Xe.isRunning||!Xe.lastResumedAt)return;const e=setInterval(()=>{const e=Date.now()-Xe.lastResumedAt.getTime(),s=Xe.totalRunTimeMs+e,a=Math.floor(s/1e3),t=Math.floor(a/3600),n=Math.floor(a%3600/60),i=a%60;as("".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0")))},1e3);return()=>clearInterval(e)},[Xe.isRunning,Xe.lastResumedAt,Xe.totalRunTimeMs]),(0,n.useEffect)(()=>{if(!H)return;const e=(new Date).toISOString().split("T")[0],s=(0,T.Se)(),a=ee.reduce((e,s)=>e+s.waste,0),t=ae.reduce((e,s)=>e+s.downtime,0);(0,A.WA)({machineName:h,operatorName:k,orderNumber:I,product:W,batchNumber:Y,shift:s,date:e,locked:!0,totalWaste:a,totalDowntime:t}),console.log("\ud83d\udcca Synced entry totals to Supabase:",{totalWaste:a,totalDowntime:t})},[ee,ae,H,h,k,I,W,Y]);const xs=(0,n.useCallback)(e=>{var s,a,t;const n=(new Date).toISOString().split("T")[0],i=(0,T.Se)(),c={isRunning:e.isRunning,startTime:(null===(s=e.startTime)||void 0===s?void 0:s.toISOString())||null,pausedAt:(null===(a=e.pausedAt)||void 0===a?void 0:a.toISOString())||null,totalRunTimeMs:e.totalRunTimeMs,lastResumedAt:(null===(t=e.lastResumedAt)||void 0===t?void 0:t.toISOString())||null,pauseHistory:[]};(0,O.Af)(h,i,n,c)},[h]),Ns=(0,n.useCallback)(()=>{const e=new Date,s={isRunning:!0,startTime:e,pausedAt:null,totalRunTimeMs:0,lastResumedAt:e};es(s),as("00:00:00"),xs(s)},[xs]),js=(0,n.useCallback)(()=>{if(!Xe.isRunning)return;const e=new Date,s=Xe.lastResumedAt?e.getTime()-Xe.lastResumedAt.getTime():0,a=(0,t.A)((0,t.A)({},Xe),{},{isRunning:!1,pausedAt:e,totalRunTimeMs:Xe.totalRunTimeMs+s});es(a),xs(a),ls("Production paused - timer stopped","success")},[Xe,xs,ls]),bs=(0,n.useCallback)(()=>{if(!is)return void ls("Please select a downtime reason","error");if(!Xe.pausedAt)return;const e=new Date,s=e.getTime()-Xe.pausedAt.getTime(),a=Math.ceil(s/6e4),n={id:(0,r.A)(),downtime:a,downtimeReason:is,notes:"Auto-recorded from production pause",timestamp:Xe.pausedAt};te(e=>[...e,n]);const i=(0,t.A)((0,t.A)({},Xe),{},{isRunning:!0,pausedAt:null,lastResumedAt:e});es(i),xs(i),ns(!1),cs(""),ls("Production resumed. ".concat(a," min downtime recorded."),"success")},[is,Xe,xs,ls]),gs=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),vs=ee.reduce((e,s)=>e+s.waste,0),fs=ae.reduce((e,s)=>e+s.downtime,0);return(0,d.jsxs)(c.P.div,{className:"capture-screen-v2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[b&&(0,d.jsxs)("div",{className:"spinner-overlay-v2",children:[(0,d.jsx)("div",{className:"spinner-v2"}),(0,d.jsx)("p",{children:"Submitting shift data..."})]}),v&&(0,d.jsx)(c.P.div,{className:"toast-container-v2",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,d.jsxs)("div",{className:"toast-message-v2 ".concat(v.type),children:[(0,d.jsx)("span",{className:"toast-icon",children:"success"===v.type?"\u2713":"!"}),v.message]})}),(0,d.jsxs)("header",{className:"capture-header-v2",children:[(0,d.jsxs)("button",{className:"back-btn-v2",onClick:()=>{(ee.length>0||ae.length>0||ne.length>0||ce.length>0||re.length>0||de.length>0)&&!H?window.confirm("You have entries that are not saved to a session. Are you sure you want to go back? Lock your shift details first to save entries.")&&u("/"):u("/")},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back"]}),(0,d.jsxs)("div",{className:"capture-title-v2",children:[(0,d.jsx)("h1",{children:h}),(0,d.jsx)("span",{className:"capture-subtitle",children:"Recording Waste & Downtime"})]}),(0,d.jsxs)("div",{className:"shift-badge-v2 ".concat(N.toLowerCase()),children:[(0,d.jsx)("span",{className:"shift-icon",children:"Day"===N?"\u25d0":"\u25d1"}),N," Shift"]})]}),(0,d.jsxs)("main",{className:"capture-main",children:[(0,d.jsxs)("div",{className:"capture-form-column",children:[(0,d.jsxs)("section",{className:"form-section",children:[(0,d.jsxs)("h2",{className:"section-heading",children:["Shift Details",H&&(0,d.jsx)("span",{className:"locked-badge",children:"\ud83d\udd12 Locked"})]}),!H&&(0,d.jsxs)("div",{className:"order-queue-select",children:[(0,d.jsxs)("div",{className:"order-buttons-row",children:[(0,d.jsxs)("button",{className:"select-order-btn add-new",onClick:()=>Fe(!0),children:[(0,d.jsx)("span",{className:"btn-icon",children:"+"}),"Add New Order"]}),(0,d.jsxs)("button",{className:"select-order-btn existing",onClick:()=>We(!0),disabled:0===Me.length,children:[(0,d.jsx)("span",{className:"btn-icon",children:"\ud83d\udccb"}),"Select Existing",Me.length>0?" (".concat(Me.length,")"):""]})]}),I&&(0,d.jsxs)("span",{className:"current-order-badge",children:["Current: ",I]})]}),(0,d.jsxs)("div",{className:"form-grid",children:[(0,d.jsx)(m,{operatorName:k,setOperatorName:H?()=>{}:M,machine:h,setMachine:()=>{},orderNumber:I,setOrderNumber:H?()=>{}:q,product:W,setProduct:H?()=>{}:L,batchNumber:Y,setBatchNumber:H?()=>{}:z,hideMachine:!0,disabled:H}),(0,d.jsx)(o.A,{dateTime:p,shift:N})]}),(0,d.jsxs)("div",{className:"speed-setting",children:[(0,d.jsxs)("div",{className:"speed-display",children:[(0,d.jsx)("span",{className:"speed-label",children:"\u26a1 Machine Speed"}),(0,d.jsx)("span",{className:"speed-value",children:ne.length>0?"".concat(ne[ne.length-1].speed," PPM"):"Not Set"}),ne.length>1&&(0,d.jsxs)("span",{className:"speed-history-count",title:"Speed change history",children:["(",ne.length," changes)"]})]}),(0,d.jsx)("button",{className:"speed-change-btn",onClick:()=>he(!0),children:ne.length>0?"Change":"Set Speed"})]}),!H&&k&&I&&W&&Y&&(0,d.jsx)("button",{className:"lock-session-btn",onClick:()=>{hs(!0),Ns()},children:"\ud83d\udd12 Lock Shift Details & Start Production"})]}),H&&(0,d.jsxs)("section",{className:"form-section machine-details-section",children:[(0,d.jsxs)("h2",{className:"section-heading",children:[(0,d.jsx)("span",{className:"section-icon",children:"\u2699\ufe0f"}),"Machine Details",(0,d.jsx)("span",{className:"production-status-badge ".concat(Xe.isRunning?"running":"paused"),children:Xe.isRunning?"\u25cf Running":"\u25c9 Paused"})]}),(0,d.jsxs)("div",{className:"machine-details-grid",children:[(0,d.jsxs)("div",{className:"detail-card",children:[(0,d.jsx)("span",{className:"detail-label",children:"Production Started"}),(0,d.jsx)("span",{className:"detail-value",children:Xe.startTime?Xe.startTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})]}),(0,d.jsxs)("div",{className:"detail-card timer-card",children:[(0,d.jsx)("span",{className:"detail-label",children:"Run Time"}),(0,d.jsx)("span",{className:"detail-value timer-value",children:ss})]}),(0,d.jsx)("div",{className:"detail-card action-card",children:Xe.isRunning?(0,d.jsxs)("button",{className:"pause-continue-btn pause",onClick:js,children:[(0,d.jsx)("span",{className:"btn-icon",children:"\u23f8"}),"Pause Production"]}):(0,d.jsxs)("button",{className:"pause-continue-btn continue",onClick:()=>ns(!0),children:[(0,d.jsx)("span",{className:"btn-icon",children:"\u25b6"}),"Continue Production"]})})]}),Xe.pausedAt&&(0,d.jsxs)("div",{className:"pause-duration-display",children:[(0,d.jsx)("span",{className:"pause-icon",children:"\u23f1\ufe0f"}),"Paused since ",Xe.pausedAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,d.jsxs)("section",{className:"form-section capture-section compact-capture waste-section",children:[(0,d.jsxs)("h2",{className:"section-heading",children:[(0,d.jsx)("span",{className:"section-icon",children:"\ud83d\uddd1\ufe0f"}),"Record Waste",ee.length>0&&(0,d.jsx)("span",{className:"entry-count-badge waste-badge",children:ee.length})]}),(0,d.jsxs)("div",{className:"capture-section-content",children:[(0,d.jsxs)("button",{className:"capture-add-btn waste-btn",onClick:()=>fe(!0),children:[(0,d.jsx)("span",{className:"btn-icon",children:"+"}),"Record Waste"]}),ee.length>0&&(0,d.jsx)("div",{className:"capture-entries-list",children:ee.slice().reverse().map((e,s)=>(0,d.jsxs)("div",{className:"capture-entry-item waste-entry ".concat(0===s?"latest":""),children:[(0,d.jsxs)("div",{className:"entry-main",children:[(0,d.jsx)("span",{className:"entry-value",children:e.waste}),(0,d.jsx)("span",{className:"entry-unit",children:"kg"})]}),(0,d.jsx)("span",{className:"entry-type",children:e.wasteType}),(0,d.jsx)("span",{className:"entry-time",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,d.jsx)("button",{className:"entry-delete-btn",onClick:()=>{return s=e.id,se(ee.filter(e=>e.id!==s)),void ls("Entry removed","success");var s},title:"Delete this entry",children:"\u2715"})]},e.id))}),ee.length>0&&(0,d.jsxs)("div",{className:"section-total",children:[(0,d.jsx)("span",{children:"Total Waste:"}),(0,d.jsxs)("strong",{children:[ee.reduce((e,s)=>e+s.waste,0).toFixed(1)," kg"]})]})]})]}),(0,d.jsxs)("section",{className:"form-section capture-section compact-capture downtime-section",children:[(0,d.jsxs)("h2",{className:"section-heading",children:[(0,d.jsx)("span",{className:"section-icon",children:"\u23f1\ufe0f"}),"Record Downtime",ae.length>0&&(0,d.jsx)("span",{className:"entry-count-badge downtime-badge",children:ae.length})]}),(0,d.jsxs)("div",{className:"capture-section-content",children:[(0,d.jsxs)("button",{className:"capture-add-btn downtime-btn",onClick:()=>we(!0),children:[(0,d.jsx)("span",{className:"btn-icon",children:"+"}),"Record Downtime"]}),ae.length>0&&(0,d.jsx)("div",{className:"capture-entries-list",children:ae.slice().reverse().map((e,s)=>(0,d.jsxs)("div",{className:"capture-entry-item downtime-entry ".concat(0===s?"latest":""),children:[(0,d.jsxs)("div",{className:"entry-main",children:[(0,d.jsx)("span",{className:"entry-value",children:e.downtime}),(0,d.jsx)("span",{className:"entry-unit",children:"min"})]}),(0,d.jsx)("span",{className:"entry-reason",children:e.downtimeReason}),(0,d.jsx)("span",{className:"entry-time",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,d.jsx)("button",{className:"entry-delete-btn",onClick:()=>{return s=e.id,te(ae.filter(e=>e.id!==s)),void ls("Entry removed","success");var s},title:"Delete this entry",children:"\u2715"})]},e.id))}),ae.length>0&&(0,d.jsxs)("div",{className:"section-total",children:[(0,d.jsx)("span",{children:"Total Downtime:"}),(0,d.jsxs)("strong",{children:[Math.floor(ae.reduce((e,s)=>e+s.downtime,0)/60),"h ",ae.reduce((e,s)=>e+s.downtime,0)%60,"m"]})]})]})]}),(0,d.jsxs)("section",{className:"form-section capture-section compact-capture",children:[(0,d.jsxs)("h2",{className:"section-heading",children:[(0,d.jsx)("span",{className:"section-icon",children:"\u2696\ufe0f"}),"Sachet Mass"]}),(0,d.jsxs)("div",{className:"capture-section-content",children:[(0,d.jsxs)("button",{className:"capture-add-btn",onClick:()=>xe(!0),children:[(0,d.jsx)("span",{className:"btn-icon",children:"+"}),"Record"]}),ce.length>0&&(0,d.jsx)("div",{className:"capture-entries-list",children:ce.map(e=>(0,d.jsxs)("div",{className:"capture-entry-item ".concat(e.ignored?"ignored":""),children:[(0,d.jsxs)("div",{className:"entry-main",children:[(0,d.jsx)("span",{className:"entry-value",children:e.mass}),(0,d.jsx)("span",{className:"entry-unit",children:"g"})]}),(0,d.jsx)("span",{className:"entry-time",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,d.jsx)("button",{className:"entry-ignore-btn ".concat(e.ignored?"ignored":""),onClick:()=>{return s=e.id,void le(ce.map(e=>e.id===s?(0,t.A)((0,t.A)({},e),{},{ignored:!e.ignored}):e));var s},title:e.ignored?"Include this entry":"Ignore this entry",children:e.ignored?"\u21a9":"\u2298"})]},e.id))})]})]}),(0,d.jsxs)("section",{className:"form-section capture-section product-confirmation-section",children:[(0,d.jsxs)("h2",{className:"section-heading",children:[(0,d.jsx)("span",{className:"section-icon",children:"\ud83d\udce6"}),"Product Confirmation",(de.length>0||re.length>0)&&(0,d.jsxs)("span",{className:"entry-count-badge",children:[de.filter(e=>!e.ignored).reduce((e,s)=>e+s.casesCount,0)+re.filter(e=>!e.ignored).reduce((e,s)=>e+s.cases,0)," cases"]})]}),(0,d.jsxs)("div",{className:"product-action-buttons",children:[(0,d.jsxs)("button",{className:"capture-add-btn scan-btn",onClick:()=>ge(!0),children:[(0,d.jsx)("span",{className:"btn-icon",children:"\ud83d\udcf7"}),"Scan Pallet"]}),(0,d.jsxs)("button",{className:"capture-add-btn loose-cases-btn",onClick:()=>je(!0),children:[(0,d.jsx)("span",{className:"btn-icon",children:"+"}),"Add Loose Cases"]})]}),de.length>0&&(0,d.jsxs)("div",{className:"product-entries-section",children:[(0,d.jsxs)("h4",{className:"entries-subheading",children:["Scanned Pallets (",de.filter(e=>!e.ignored).length,")"]}),(0,d.jsx)("div",{className:"capture-entries-list pallet-list",children:de.slice().reverse().map((e,s)=>(0,d.jsxs)("div",{className:"capture-entry-item pallet-entry ".concat(e.ignored?"ignored":""," ").concat(0===s?"latest":""),children:[(0,d.jsxs)("div",{className:"entry-main",children:[(0,d.jsxs)("span",{className:"pallet-badge",children:["P",e.palletNumber]}),(0,d.jsxs)("div",{className:"pallet-details",children:[(0,d.jsxs)("span",{className:"pallet-batch",children:["Batch: ",e.batchNumber]}),(0,d.jsxs)("span",{className:"pallet-cases",children:[e.casesCount," cases"]})]})]}),(0,d.jsx)("span",{className:"entry-time",children:gs(e.timestamp)}),(0,d.jsx)("button",{className:"entry-ignore-btn ".concat(e.ignored?"ignored":""),onClick:()=>{return s=e.id,void me(de.map(e=>e.id===s?(0,t.A)((0,t.A)({},e),{},{ignored:!e.ignored}):e));var s},title:e.ignored?"Include this pallet":"Ignore this pallet",children:e.ignored?"\u21a9":"\u2298"})]},e.id))})]}),re.length>0&&(0,d.jsxs)("div",{className:"product-entries-section",children:[(0,d.jsxs)("h4",{className:"entries-subheading",children:["Loose Cases (",re.filter(e=>!e.ignored).length,")"]}),(0,d.jsx)("div",{className:"capture-entries-list loose-cases-list",children:re.slice().reverse().map((e,s)=>(0,d.jsxs)("div",{className:"capture-entry-item loose-entry ".concat(e.ignored?"ignored":""),children:[(0,d.jsxs)("div",{className:"entry-main",children:[(0,d.jsx)("span",{className:"loose-badge",children:"LC"}),(0,d.jsxs)("div",{className:"loose-details",children:[(0,d.jsxs)("span",{className:"loose-batch",children:["Batch: ",e.batchNumber]}),(0,d.jsxs)("span",{className:"loose-cases",children:[e.cases," cases"]})]})]}),(0,d.jsx)("span",{className:"entry-time",children:gs(e.timestamp)}),(0,d.jsx)("button",{className:"entry-ignore-btn ".concat(e.ignored?"ignored":""),onClick:()=>{return s=e.id,void oe(re.map(e=>e.id===s?(0,t.A)((0,t.A)({},e),{},{ignored:!e.ignored}):e));var s},title:e.ignored?"Include this entry":"Ignore this entry",children:e.ignored?"\u21a9":"\u2298"})]},e.id))})]}),(de.length>0||re.length>0)&&(0,d.jsxs)("div",{className:"product-summary",children:[(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Total Pallets:"}),(0,d.jsx)("span",{className:"summary-value",children:de.filter(e=>!e.ignored).length})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Total Cases:"}),(0,d.jsx)("span",{className:"summary-value",children:de.filter(e=>!e.ignored).reduce((e,s)=>e+s.casesCount,0)+re.filter(e=>!e.ignored).reduce((e,s)=>e+s.cases,0)})]})]})]})]}),(0,d.jsxs)("div",{className:"capture-summary-column",children:[(0,d.jsxs)("div",{className:"live-stats-card",children:[(0,d.jsx)("h3",{children:"Session Totals"}),(0,d.jsxs)("div",{className:"stats-grid",children:[(0,d.jsxs)("div",{className:"stat-box waste",children:[(0,d.jsx)("span",{className:"stat-number",children:vs.toFixed(1)}),(0,d.jsx)("span",{className:"stat-unit",children:"kg waste"})]}),(0,d.jsxs)("div",{className:"stat-box downtime",children:[(0,d.jsx)("span",{className:"stat-number",children:fs}),(0,d.jsx)("span",{className:"stat-unit",children:"min downtime"})]}),(0,d.jsxs)("div",{className:"stat-box cases",children:[(0,d.jsx)("span",{className:"stat-number",children:de.filter(e=>!e.ignored).reduce((e,s)=>e+s.casesCount,0)+re.filter(e=>!e.ignored).reduce((e,s)=>e+s.cases,0)}),(0,d.jsx)("span",{className:"stat-unit",children:"cases"})]}),(0,d.jsxs)("div",{className:"stat-box pallets",children:[(0,d.jsx)("span",{className:"stat-number",children:de.filter(e=>!e.ignored).length}),(0,d.jsx)("span",{className:"stat-unit",children:"pallets"})]})]})]}),(0,d.jsxs)("div",{className:"charts-card",children:[(0,d.jsx)("h3",{children:"Visual Summary"}),(0,d.jsx)(S,{wasteEntries:ee,downtimeEntries:ae})]}),(ee.length>0||ae.length>0)&&(0,d.jsxs)(c.P.div,{className:"submission-card",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[(0,d.jsx)("h3",{children:"Ready to Submit"}),(0,d.jsxs)("div",{className:"submission-details",children:[(0,d.jsxs)("div",{className:"detail-row",children:[(0,d.jsx)("span",{children:"Operator"}),(0,d.jsx)("strong",{children:k||"\u2014"})]}),(0,d.jsxs)("div",{className:"detail-row",children:[(0,d.jsx)("span",{children:"Machine"}),(0,d.jsx)("strong",{children:h})]}),(0,d.jsxs)("div",{className:"detail-row",children:[(0,d.jsx)("span",{children:"Order"}),(0,d.jsx)("strong",{children:I||"\u2014"})]}),(0,d.jsxs)("div",{className:"detail-row highlight waste",children:[(0,d.jsx)("span",{children:"Total Waste"}),(0,d.jsxs)("strong",{children:[vs.toFixed(1)," kg"]})]}),(0,d.jsxs)("div",{className:"detail-row highlight downtime",children:[(0,d.jsx)("span",{children:"Total Downtime"}),(0,d.jsxs)("strong",{children:[Math.floor(fs/60),"h ",fs%60,"m"]})]})]}),(0,d.jsx)("button",{className:"submit-btn-v2 ".concat(Te?"":"early-submit"),onClick:e=>{e.preventDefault(),k&&I&&W&&Y?0!==ee.length||0!==ae.length?Te?w(!0):(Ue(null),$e(null),Ge(!0)):ls("Please add at least one waste or downtime entry","error"):ls("Please fill in all shift details","error")},disabled:b||!k||!I||!W||!Y,children:b?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"btn-spinner"}),"Submitting..."]}):"Finalize Submission"}),!Te&&(0,d.jsx)("p",{className:"submission-window-note",children:"\u26a0\ufe0f Submitting early - you'll be asked about changeover"})]})]})]}),(0,d.jsx)(C.A,{isOpen:y,title:"Confirm Submission",message:"You are about to submit ".concat(ee.length," waste entries and ").concat(ae.length," downtime entries for ").concat(h,".").concat(null!==Ve?" Changeover: ".concat(Ve?"Yes":"No",". Maintenance/Cleaning: ").concat(Ze?"Yes":"No","."):""," This action cannot be undone."),confirmText:"Submit",cancelText:"Review",type:"success",onConfirm:async()=>{w(!1),g(!0);const s=ee.reduce((e,s)=>e+s.waste,0),a=ae.reduce((e,s)=>e+s.downtime,0),t={id:(0,r.A)(),operatorName:k,machine:h,orderNumber:I,product:W,batchNumber:Y,shift:N,date:p.toISOString().split("T")[0],wasteEntries:ee,downtimeEntries:ae,speedEntries:ne,sachetMassEntries:ce,looseCasesEntries:re,palletScanEntries:de,totalWaste:s,totalDowntime:a,submittedAt:new Date},n={shiftData:{operator_name:k,machine:h,order_number:I,product:W,batch_number:Y,shift:N,submission_date:p.toISOString().split("T")[0],is_early_submission:!Te,will_changeover:null!==Ve&&void 0!==Ve?Ve:void 0,will_maintenance_cleaning:null!==Ze&&void 0!==Ze?Ze:void 0},wasteEntries:ee.map(e=>({waste:e.waste,wasteType:e.wasteType,timestamp:e.timestamp})),downtimeEntries:ae.map(e=>({downtime:e.downtime,downtimeReason:e.downtimeReason,timestamp:e.timestamp})),speedEntries:ne.map(e=>({speed:e.speed,timestamp:e.timestamp})),sachetMassEntries:ce.map(e=>({mass:e.mass,timestamp:e.timestamp})),looseCasesEntries:re.map(e=>({batchNumber:e.batchNumber,cases:e.cases,timestamp:e.timestamp})),palletScanEntries:de.map(e=>({qrCode:e.qrCode,batchNumber:e.batchNumber,palletNumber:e.palletNumber,casesCount:e.casesCount,timestamp:e.timestamp}))};try{(0,P.IN)(t);const s=await(0,E.jw)(n.shiftData,n.wasteEntries,n.downtimeEntries,n.speedEntries,n.sachetMassEntries,n.looseCasesEntries,n.palletScanEntries);s.warnings.length>0?ls("Submitted with warnings: ".concat(s.warnings.join(", ")),"success"):ls("Shift data submitted successfully","success"),J(!1),e&&(0,E.LY)(e,"idle"),se([]),te([]),ie([]),le([]),oe([]),me([]),Ue(null),$e(!1),sessionStorage.removeItem("session_".concat(e));const a=(new Date).toISOString().split("T")[0],i=B(h,N,a);localStorage.removeItem(i),(0,A.KW)(h,N,a),q(""),L(""),z("")}catch(i){console.error("Submission error:",i),(0,P.nN)(n,String(i)),ls("Saved locally. Will retry sync automatically.","error"),J(!1),e&&(0,E.LY)(e,"idle");const s=(new Date).toISOString().split("T")[0],a=B(h,N,s);localStorage.removeItem(a),(0,A.KW)(h,N,s),se([]),te([]),ie([]),le([]),oe([]),me([]),Ue(null),$e(!1),q(""),L(""),z("")}finally{g(!1)}},onCancel:()=>w(!1)}),(0,d.jsx)(l.N,{children:Ke&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,d.jsxs)(c.P.div,{className:"capture-modal changeover-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\u26a0\ufe0f"}),"Early Submission"]}),(0,d.jsx)("p",{className:"changeover-intro",children:"You are submitting before the end of shift window. Please answer the following:"}),(0,d.jsxs)("div",{className:"changeover-question",children:[(0,d.jsx)("label",{className:"question-label",children:"Will there be a changeover to a new product and order?"}),(0,d.jsxs)("div",{className:"question-options",children:[(0,d.jsx)("button",{className:"option-btn ".concat(!0===Ve?"selected yes":""),onClick:()=>Ue(!0),children:"\u2713 Yes"}),(0,d.jsx)("button",{className:"option-btn ".concat(!1===Ve?"selected no":""),onClick:()=>Ue(!1),children:"\u2717 No"})]})]}),(0,d.jsxs)("div",{className:"changeover-question",children:[(0,d.jsx)("label",{className:"question-label",children:"Will there be maintenance or cleaning before next production start?"}),(0,d.jsxs)("div",{className:"question-options",children:[(0,d.jsx)("button",{className:"option-btn ".concat(!0===Ze?"selected yes":""),onClick:()=>$e(!0),children:"\u2713 Yes"}),(0,d.jsx)("button",{className:"option-btn ".concat(!1===Ze?"selected no":""),onClick:()=>$e(!1),children:"\u2717 No"})]})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>Ge(!1),children:"Cancel"}),(0,d.jsx)("button",{className:"modal-btn confirm",onClick:()=>{null!==Ve&&null!==Ze?(Ge(!1),w(!0)):ls("Please answer both questions","error")},disabled:null===Ve||null===Ze,children:"Continue to Submit"})]})]})})}),(0,d.jsx)(l.N,{children:ze&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,d.jsxs)(c.P.div,{className:"capture-modal shift-change-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\ud83d\udd04"}),"Shift Change Detected"]}),(0,d.jsxs)("p",{className:"modal-description",children:["The shift has changed to ",(0,d.jsx)("strong",{children:N})," shift. Please enter the new operator's name or number."]}),(0,d.jsxs)("div",{className:"modal-form",children:[(0,d.jsx)("label",{className:"modal-label",children:"New Operator Name/Number"}),(0,d.jsx)("input",{type:"text",className:"modal-input",placeholder:"Enter operator name or number...",value:Je,onChange:e=>Qe(e.target.value),autoFocus:!0})]}),(0,d.jsxs)("div",{className:"shift-change-info",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Current Order:"})," ",I]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Previous Operator:"})," ",k]})]}),(0,d.jsx)("div",{className:"modal-actions",children:(0,d.jsx)("button",{className:"modal-btn confirm",onClick:()=>{if(!Je.trim())return void ls("Please enter the new operator name/number","error");M(Je.trim()),He(!1),Qe(""),e&&(0,E.LY)(e,"running",Je.trim(),I,N);const s=(new Date).toISOString().split("T")[0],a=B(h,N,s),t={machineName:h,operatorName:Je.trim(),orderNumber:I,product:W,batchNumber:Y,shift:N,date:s,locked:!0,wasteEntries:ee,downtimeEntries:ae,speedEntries:ne,sachetMassEntries:ce,looseCasesEntries:re,palletScanEntries:de};localStorage.setItem(a,JSON.stringify(t)),ls("Operator changed to ".concat(Je.trim()," for ").concat(N," shift"),"success")},disabled:!Je.trim(),children:"Confirm Operator Change"})})]})})}),(0,d.jsx)(l.N,{children:ue&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>he(!1),children:(0,d.jsxs)(c.P.div,{className:"capture-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\u26a1"}),"Record Machine Speed"]}),(0,d.jsxs)("div",{className:"modal-form",children:[(0,d.jsx)("label",{className:"modal-label",children:"Speed (PPM - Packs Per Minute)"}),(0,d.jsx)("input",{type:"number",className:"modal-input",placeholder:"Enter speed...",value:Se,onChange:e=>Ce(e.target.value?Number(e.target.value):""),autoFocus:!0})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>{he(!1),Ce("")},children:"Cancel"}),(0,d.jsx)("button",{className:"modal-btn confirm",onClick:()=>{if(Se&&Se>0){const e={id:(0,r.A)(),speed:Number(Se),timestamp:new Date};ie([...ne,e]),Ce(""),he(!1),ls("Machine speed recorded","success")}},disabled:!Se||Se<=0,children:"Confirm"})]})]})})}),(0,d.jsx)(l.N,{children:pe&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>xe(!1),children:(0,d.jsxs)(c.P.div,{className:"capture-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\u2696\ufe0f"}),"Record Sachet Mass"]}),(0,d.jsxs)("div",{className:"modal-form",children:[(0,d.jsx)("label",{className:"modal-label",children:"Mass (grams)"}),(0,d.jsx)("input",{type:"number",step:"0.1",className:"modal-input",placeholder:"Enter mass in grams...",value:ke,onChange:e=>_e(e.target.value?Number(e.target.value):""),autoFocus:!0})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>{xe(!1),_e("")},children:"Cancel"}),(0,d.jsx)("button",{className:"modal-btn confirm",onClick:()=>{if(ke&&ke>0){const e={id:(0,r.A)(),mass:Number(ke),timestamp:new Date};le([...ce,e]),_e(""),xe(!1),ls("Sachet mass recorded","success")}},disabled:!ke||ke<=0,children:"Confirm"})]})]})})}),(0,d.jsx)(l.N,{children:ve&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>fe(!1),children:(0,d.jsxs)(c.P.div,{className:"capture-modal waste-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\ud83d\uddd1\ufe0f"}),"Record Waste"]}),(0,d.jsxs)("div",{className:"modal-form",children:[(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{className:"modal-label",children:"Waste Type"}),(0,d.jsxs)("select",{className:"modal-select",value:G,onChange:e=>V(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Select waste type..."}),R.rE.map(e=>(0,d.jsx)("option",{value:e,children:e},e))]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{className:"modal-label",children:"Weight (kg)"}),(0,d.jsx)("input",{type:"number",step:"0.1",className:"modal-input",placeholder:"Enter weight in kg...",value:Q,onChange:e=>K(e.target.value?Number(e.target.value):""),min:0})]})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>{fe(!1),K(""),V("")},children:"Cancel"}),(0,d.jsx)("button",{className:"modal-btn confirm waste-confirm",onClick:()=>{if(Q&&G){const e={id:(0,r.A)(),waste:Number(Q),wasteType:G,timestamp:new Date};se([...ee,e]),K(""),V(""),fe(!1),ls("Waste entry added","success")}},disabled:!Q||Q<=0||!G,children:"Add Waste Entry"})]})]})})}),(0,d.jsx)(l.N,{children:ye&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>we(!1),children:(0,d.jsxs)(c.P.div,{className:"capture-modal downtime-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\u23f1\ufe0f"}),"Record Downtime"]}),(0,d.jsxs)("div",{className:"modal-form",children:[(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{className:"modal-label",children:"Downtime Reason"}),(0,d.jsxs)("select",{className:"modal-select",value:$,onChange:e=>X(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Select reason..."}),R.wK.map(e=>(0,d.jsx)("option",{value:e,children:e},e))]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{className:"modal-label",children:"Duration (minutes)"}),(0,d.jsx)("input",{type:"number",className:"modal-input",placeholder:"Enter minutes...",value:U,onChange:e=>Z(e.target.value?Number(e.target.value):""),min:1})]})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>{we(!1),Z(""),X("")},children:"Cancel"}),(0,d.jsx)("button",{className:"modal-btn confirm downtime-confirm",onClick:()=>{if(U&&$){const e={id:(0,r.A)(),downtime:Number(U),downtimeReason:$,notes:void 0,timestamp:new Date};te([...ae,e]),Z(""),X(""),we(!1),ls("Downtime entry added","success")}},disabled:!U||U<=0||!$,children:"Add Downtime Entry"})]})]})})}),(0,d.jsx)(l.N,{children:ts&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>ns(!1),children:(0,d.jsxs)(c.P.div,{className:"capture-modal continue-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\u25b6"}),"Continue Production"]}),(0,d.jsxs)("div",{className:"modal-form",children:[(0,d.jsxs)("div",{className:"pause-info",children:[(0,d.jsx)("span",{className:"pause-duration-label",children:"Paused Duration:"}),(0,d.jsx)("span",{className:"pause-duration-value",children:Xe.pausedAt?"".concat(Math.ceil((Date.now()-Xe.pausedAt.getTime())/6e4)," minutes"):"0 minutes"})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{className:"modal-label",children:"What was the reason for this downtime?"}),(0,d.jsxs)("select",{className:"modal-select",value:is,onChange:e=>cs(e.target.value),autoFocus:!0,children:[(0,d.jsx)("option",{value:"",children:"Select reason..."}),R.wK.map(e=>(0,d.jsx)("option",{value:e,children:e},e))]})]})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>{ns(!1),cs("")},children:"Cancel"}),(0,d.jsx)("button",{className:"modal-btn confirm continue-confirm",onClick:bs,disabled:!is,children:"Record & Continue"})]})]})})}),(0,d.jsx)(l.N,{children:Ne&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>je(!1),children:(0,d.jsxs)(c.P.div,{className:"capture-modal loose-cases-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\ud83d\udce6"}),"Add Loose Cases"]}),(0,d.jsx)("p",{className:"modal-description",children:"Enter cases that are not part of a full pallet scan"}),(0,d.jsxs)("div",{className:"modal-form",children:[(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{className:"modal-label",children:"Batch Number (5 digits)"}),(0,d.jsx)("input",{type:"text",className:"modal-input",placeholder:"e.g., 12345",value:Re,onChange:e=>{const s=e.target.value.replace(/\D/g,"").slice(0,5);Ee(s)},maxLength:5,autoFocus:!0})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{className:"modal-label",children:"Number of Cases"}),(0,d.jsx)("input",{type:"number",className:"modal-input",placeholder:"Enter quantity...",value:Pe,onChange:e=>Ae(e.target.value?Number(e.target.value):""),min:1})]})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>{je(!1),Ee(""),Ae("")},children:"Cancel"}),(0,d.jsx)("button",{className:"modal-btn confirm",onClick:()=>{if(Re&&5===Re.length&&Pe&&Pe>0){const e={id:(0,r.A)(),batchNumber:Re,cases:Number(Pe),timestamp:new Date};oe([...re,e]),Ee(""),Ae(""),je(!1),ls("Loose cases recorded","success")}else 5!==Re.length&&ls("Batch number must be 5 digits","error")},disabled:5!==Re.length||!Pe||Pe<=0,children:"Add Cases"})]})]})})}),(0,d.jsx)(_,{isOpen:be,onClose:()=>ge(!1),onScan:e=>{const s=(e=>{const s=e.trim();if(!/^\d{13}$/.test(s))return null;const a=parseInt(s.substring(9,13),10);return Number.isNaN(a)?null:{batchNumber:s.substring(0,5),palletNumber:s.substring(5,9),casesCount:a}})(e);if(!s)return void ls("Invalid QR code format. Expected 13 digits: BBBBBPPPPCCCC","error");if(de.some(s=>s.qrCode===e))return void ls("Pallet ".concat(s.palletNumber," has already been scanned!"),"error");const a={id:(0,r.A)(),qrCode:e,batchNumber:s.batchNumber,palletNumber:s.palletNumber,casesCount:s.casesCount,timestamp:new Date};me([...de,a]),ls("Pallet ".concat(s.palletNumber," scanned (").concat(s.casesCount," cases)"),"success")},recentScans:de.map(e=>e.qrCode)}),(0,d.jsx)(l.N,{children:qe&&(0,d.jsx)(c.P.div,{className:"capture-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>We(!1),children:(0,d.jsxs)(c.P.div,{className:"capture-modal order-select-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{className:"modal-title",children:[(0,d.jsx)("span",{className:"modal-icon",children:"\ud83d\udccb"}),"Select Order"]}),(0,d.jsx)("p",{className:"modal-description",children:"Choose an order from the queue (sorted by priority)"}),(0,d.jsx)("div",{className:"order-queue-list",children:Me.map((e,s)=>(0,d.jsxs)("button",{className:"order-queue-item ".concat(I===e.order_number?"selected":""),onClick:()=>(e=>{q(e.order_number),L(e.product),z(e.batch_number),We(!1),ls("Selected order: ".concat(e.order_number),"success")})(e),children:[(0,d.jsxs)("span",{className:"order-priority",children:["#",s+1]}),(0,d.jsxs)("div",{className:"order-details",children:[(0,d.jsx)("span",{className:"order-number",children:e.order_number}),(0,d.jsx)("span",{className:"order-product",children:e.product}),(0,d.jsxs)("span",{className:"order-batch",children:["Batch: ",e.batch_number]})]}),I===e.order_number&&(0,d.jsx)("span",{className:"order-selected-badge",children:"\u2713"})]},e.id))}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-btn add-order",onClick:()=>{We(!1),Fe(!0)},children:"+ Add New Order"}),(0,d.jsx)("button",{className:"modal-btn cancel",onClick:()=>We(!1),children:"Cancel"})]})]})})}),(0,d.jsx)(F,{isOpen:Le,onClose:()=>Fe(!1),machineId:e||"",machineName:h,onOrderAdded:s=>{q(s.orderNumber),L(s.product),z(s.batchNumber),We(!1),ls("Created and selected order: ".concat(s.orderNumber),"success"),(0,E.Vw)(e||"").then(e=>Ie(e)).catch(console.error)}})]})}},3113:(e,s,a)=>{a.d(s,{A:()=>i});a(5043);var t=a(9908),n=a(579);const i=e=>{let{dateTime:s,shift:a}=e;return(0,n.jsxs)("div",{className:"shift-info-card",children:[(0,n.jsxs)("div",{className:"shift-info-header",children:[(0,n.jsx)("span",{className:"info-label",children:"Current Date"}),(0,n.jsx)("span",{className:"info-value date",children:(0,t.GP)(s,"EEEE,")}),(0,n.jsx)("span",{className:"info-value",children:(0,t.GP)(s,"MMM d, yyyy")})]}),(0,n.jsxs)("div",{className:"shift-info-time",children:[(0,n.jsx)("span",{className:"info-label",children:"Current Time"}),(0,n.jsx)("span",{className:"time-display",children:(0,t.GP)(s,"HH:mm:ss")})]})]})}},6353:(e,s,a)=>{a.d(s,{A:()=>c});a(5043);var t=a(9570),n=a(6446),i=a(579);const c=e=>{let{isOpen:s,title:a,message:c,confirmText:l="Confirm",cancelText:r="Cancel",onConfirm:o,onCancel:d,type:m="default"}=e;return(0,i.jsx)(t.N,{children:s&&(0,i.jsx)(n.P.div,{className:"confirm-dialog-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,children:(0,i.jsxs)(n.P.div,{className:"confirm-dialog",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{className:"confirm-dialog-header",children:(0,i.jsx)("h3",{children:a})}),(0,i.jsx)("div",{className:"confirm-dialog-body",children:(0,i.jsx)("p",{children:c})}),(0,i.jsxs)("div",{className:"confirm-dialog-footer",children:[(0,i.jsx)("button",{className:"btn btn-outline-secondary",onClick:d,children:r}),(0,i.jsx)("button",{className:"btn ".concat((()=>{switch(m){case"danger":return"btn-danger";case"success":return"btn-success";default:return"btn-primary"}})()),onClick:o,children:l})]})]})})})}}}]);
//# sourceMappingURL=640.7d685647.chunk.js.map