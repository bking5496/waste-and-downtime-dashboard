"use strict";(self.webpackChunkwaste_and_downtime_dashboard=self.webpackChunkwaste_and_downtime_dashboard||[]).push([[636],{8636:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(5043),n=s(1737),c=s(579);const l=e=>{let{label:t="Latest",onBarClick:s}=e;const[l,i]=(0,a.useState)(null),[r,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=!0;(async()=>{if(n.$G)try{var t;const s=await(0,n.qH)(1);if(!e)return;i(null!==(t=s[0])&&void 0!==t?t:null)}catch(s){}})();const t=n.$G?(0,n.r5)(e=>{i(e),o(!0),setTimeout(()=>o(!1),500)}):()=>{},s=e=>{const t=e;null!==t&&void 0!==t&&t.detail&&(i(t.detail),o(!0),setTimeout(()=>o(!1),500))};return window.addEventListener("chat_message_sent",s),()=>{e=!1,t(),window.removeEventListener("chat_message_sent",s)}},[]);const d=(0,a.useMemo)(()=>{if(!l)return"No messages yet";const e=(e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})(l.created_at);return"".concat(l.user_name).concat(e?" (".concat(e,")"):"",": ").concat(l.content)},[l]),u=()=>{s&&s()};return(0,c.jsxs)("div",{className:"latest-message-bar ".concat(r?"pulse":""),role:"status","aria-label":"Latest chat message",onClick:u,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),u())},tabIndex:s?0:-1,style:{cursor:s?"pointer":"default"},children:[(0,c.jsx)("div",{className:"latest-message-icon",children:"\ud83d\udcac"}),(0,c.jsxs)("div",{className:"latest-message-label",children:[t,":"]}),(0,c.jsx)("div",{className:"latest-message-text",title:d,children:d}),s&&(0,c.jsx)("div",{className:"latest-message-action",children:"Open Chat \u2192"})]})}}}]);
//# sourceMappingURL=636.c9619cfd.chunk.js.map