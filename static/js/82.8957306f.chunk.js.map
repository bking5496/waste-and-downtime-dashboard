{"version":3,"file":"static/js/82.8957306f.chunk.js","mappings":"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","sources":["components/MachineSettingsModal.tsx","components/SubMachineModal.tsx","pages/Dashboard.tsx","../node_modules/uuid/dist/native.js","../node_modules/uuid/dist/rng.js","../node_modules/uuid/dist/stringify.js","../node_modules/uuid/dist/v4.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { Machine } from '../types';\r\nimport { getMachinesData, updateMachine, addMachine, deleteMachine } from '../lib/storage';\r\n\r\ninterface MachineSettingsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onMachinesUpdated: () => void;\r\n}\r\n\r\nconst MachineSettingsModal: React.FC<MachineSettingsModalProps> = ({ \r\n  isOpen, \r\n  onClose,\r\n  onMachinesUpdated \r\n}) => {\r\n  const [machines, setMachines] = useState<Machine[]>([]);\r\n  const [editingMachine, setEditingMachine] = useState<Machine | null>(null);\r\n  const [, setIsAddingNew] = useState(false); // Used in setIsAddingNew(false) after add\r\n  const [newMachineName, setNewMachineName] = useState('');\r\n  const [newMachineStatus, setNewMachineStatus] = useState<Machine['status']>('idle');\r\n  const [newMachineSubCount, setNewMachineSubCount] = useState<number>(0);\r\n  const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null);\r\n  const [activeTab, setActiveTab] = useState<'machines' | 'add'>('machines');\r\n  const [, setIsSaving] = useState(false); // Used for loading state\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      loadMachines();\r\n      setActiveTab('machines');\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const loadMachines = () => {\r\n    const data = getMachinesData();\r\n    setMachines(data);\r\n  };\r\n\r\n  const showToast = (message: string, type: 'success' | 'error') => {\r\n    setToast({ message, type });\r\n    setTimeout(() => setToast(null), 3000);\r\n  };\r\n\r\n  const handleUpdateMachine = async (machine: Machine) => {\r\n    setIsSaving(true);\r\n    try {\r\n      await updateMachine(machine.id, machine);\r\n      loadMachines();\r\n      setEditingMachine(null);\r\n      onMachinesUpdated();\r\n      showToast(`${machine.name} updated successfully`, 'success');\r\n    } catch (error) {\r\n      showToast('Failed to update machine', 'error');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleAddMachine = async () => {\r\n    if (!newMachineName.trim()) {\r\n      showToast('Please enter a machine name', 'error');\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      const newMachine: Machine = {\r\n        id: `machine-${uuidv4().slice(0, 8)}`,\r\n        name: newMachineName.trim(),\r\n        status: newMachineStatus,\r\n        subMachineCount: newMachineSubCount > 0 ? newMachineSubCount : undefined,\r\n      };\r\n\r\n      await addMachine(newMachine);\r\n      loadMachines();\r\n      setIsAddingNew(false);\r\n      setNewMachineName('');\r\n      setNewMachineStatus('idle');\r\n      setNewMachineSubCount(0);\r\n      setActiveTab('machines');\r\n      onMachinesUpdated();\r\n      showToast(`${newMachine.name} added successfully`, 'success');\r\n    } catch (error) {\r\n      showToast('Failed to add machine', 'error');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteMachine = async (machine: Machine) => {\r\n    if (window.confirm(`Are you sure you want to delete \"${machine.name}\"? This cannot be undone.`)) {\r\n      setIsSaving(true);\r\n      try {\r\n        await deleteMachine(machine.id);\r\n        loadMachines();\r\n        onMachinesUpdated();\r\n        showToast(`${machine.name} deleted`, 'success');\r\n      } catch (error) {\r\n        showToast('Failed to delete machine', 'error');\r\n      } finally {\r\n        setIsSaving(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (machineId: string, newStatus: Machine['status']) => {\r\n    const machine = machines.find(m => m.id === machineId);\r\n    if (machine) {\r\n      try {\r\n        await updateMachine(machineId, { status: newStatus });\r\n        loadMachines();\r\n        onMachinesUpdated();\r\n      } catch (error) {\r\n        showToast('Failed to update status', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: Machine['status']) => {\r\n    switch (status) {\r\n      case 'running': return '#00ff88';\r\n      case 'idle': return '#00f5ff';\r\n      case 'maintenance': return '#ff4757';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: Machine['status']) => {\r\n    switch (status) {\r\n      case 'running': return '▶';\r\n      case 'idle': return '◼';\r\n      case 'maintenance': return '⚠';\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        className=\"settings-modal-overlay\"\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n        onClick={onClose}\r\n      >\r\n        <motion.div\r\n          className=\"settings-modal-container\"\r\n          initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n          animate={{ opacity: 1, scale: 1, y: 0 }}\r\n          exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n          onClick={e => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"settings-modal-header\">\r\n            <div className=\"settings-header-content\">\r\n              <div className=\"settings-icon-wrapper\">\r\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <circle cx=\"12\" cy=\"12\" r=\"3\"/>\r\n                  <path d=\"M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83\"/>\r\n                </svg>\r\n              </div>\r\n              <div className=\"settings-title-group\">\r\n                <h2>Machine Settings</h2>\r\n                <span className=\"settings-subtitle\">{machines.length} machines configured</span>\r\n              </div>\r\n            </div>\r\n            <button className=\"settings-close-btn\" onClick={onClose}>\r\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M18 6L6 18M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Tabs */}\r\n          <div className=\"settings-tabs\">\r\n            <button \r\n              className={`settings-tab ${activeTab === 'machines' ? 'active' : ''}`}\r\n              onClick={() => setActiveTab('machines')}\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"18\" height=\"18\">\r\n                <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\r\n                <path d=\"M8 21h8M12 17v4\"/>\r\n              </svg>\r\n              <span>Machines</span>\r\n            </button>\r\n            <button \r\n              className={`settings-tab ${activeTab === 'add' ? 'active' : ''}`}\r\n              onClick={() => setActiveTab('add')}\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"18\" height=\"18\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                <path d=\"M12 8v8M8 12h8\"/>\r\n              </svg>\r\n              <span>Add New</span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Toast */}\r\n          <AnimatePresence>\r\n            {toast && (\r\n              <motion.div \r\n                className={`settings-toast-v2 ${toast.type}`}\r\n                initial={{ opacity: 0, y: -20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n              >\r\n                <span className=\"toast-icon\">\r\n                  {toast.type === 'success' ? '✓' : '✕'}\r\n                </span>\r\n                {toast.message}\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          {/* Content Area */}\r\n          <div className=\"settings-content\">\r\n            {activeTab === 'machines' ? (\r\n              /* Machine List */\r\n              <div className=\"machine-list-v2\">\r\n                {machines.length === 0 ? (\r\n                  <div className=\"empty-machines\">\r\n                    <div className=\"empty-icon\">\r\n                      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\r\n                        <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\r\n                        <path d=\"M8 21h8M12 17v4\"/>\r\n                      </svg>\r\n                    </div>\r\n                    <p>No machines configured</p>\r\n                    <button className=\"empty-add-btn\" onClick={() => setActiveTab('add')}>\r\n                      Add your first machine\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  machines.map((machine, index) => (\r\n                    <motion.div\r\n                      key={machine.id}\r\n                      className={`machine-card ${editingMachine?.id === machine.id ? 'editing' : ''}`}\r\n                      initial={{ opacity: 0, y: 10 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      transition={{ delay: index * 0.03 }}\r\n                    >\r\n                      {editingMachine?.id === machine.id ? (\r\n                        /* Edit Mode */\r\n                        <div className=\"machine-edit-mode\">\r\n                          <div className=\"edit-section\">\r\n                            <label className=\"edit-label\">Machine Name</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"edit-input\"\r\n                              value={editingMachine.name}\r\n                              onChange={e => setEditingMachine({ ...editingMachine, name: e.target.value })}\r\n                              autoFocus\r\n                            />\r\n                          </div>\r\n                          \r\n                          <div className=\"edit-row\">\r\n                            <div className=\"edit-section\">\r\n                              <label className=\"edit-label\">Status</label>\r\n                              <div className=\"status-select-group\">\r\n                                {(['running', 'idle', 'maintenance'] as const).map(status => (\r\n                                  <button\r\n                                    key={status}\r\n                                    className={`status-select-btn ${status} ${editingMachine.status === status ? 'selected' : ''}`}\r\n                                    onClick={() => setEditingMachine({ ...editingMachine, status })}\r\n                                  >\r\n                                    <span className=\"status-select-icon\">{getStatusIcon(status)}</span>\r\n                                    <span className=\"status-select-text\">\r\n                                      {status.charAt(0).toUpperCase() + status.slice(1)}\r\n                                    </span>\r\n                                  </button>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"edit-section\">\r\n                            <label className=\"edit-label\">Sub-machines (for machine groups)</label>\r\n                            <select\r\n                              className=\"edit-select\"\r\n                              value={editingMachine.subMachineCount || 0}\r\n                              onChange={e => setEditingMachine({ \r\n                                ...editingMachine, \r\n                                subMachineCount: parseInt(e.target.value) || undefined \r\n                              })}\r\n                            >\r\n                              <option value=\"0\">None - Single machine</option>\r\n                              <option value=\"2\">2 sub-machines</option>\r\n                              <option value=\"3\">3 sub-machines</option>\r\n                              <option value=\"4\">4 sub-machines</option>\r\n                              <option value=\"5\">5 sub-machines</option>\r\n                              <option value=\"6\">6 sub-machines</option>\r\n                              <option value=\"8\">8 sub-machines</option>\r\n                              <option value=\"10\">10 sub-machines</option>\r\n                            </select>\r\n                          </div>\r\n\r\n                          <div className=\"edit-actions\">\r\n                            <button className=\"edit-save-btn\" onClick={() => handleUpdateMachine(editingMachine)}>\r\n                              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"16\" height=\"16\">\r\n                                <path d=\"M20 6L9 17l-5-5\"/>\r\n                              </svg>\r\n                              Save Changes\r\n                            </button>\r\n                            <button className=\"edit-cancel-btn\" onClick={() => setEditingMachine(null)}>\r\n                              Cancel\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        /* View Mode */\r\n                        <>\r\n                          <div className=\"machine-card-header\">\r\n                            <div className=\"machine-identity\">\r\n                              <div \r\n                                className=\"machine-status-dot\"\r\n                                style={{ backgroundColor: getStatusColor(machine.status) }}\r\n                              >\r\n                                <span className=\"status-pulse\"></span>\r\n                              </div>\r\n                              <div className=\"machine-name-info\">\r\n                                <span className=\"machine-card-name\">{machine.name}</span>\r\n                                {machine.subMachineCount && machine.subMachineCount > 0 && (\r\n                                  <span className=\"machine-group-badge\">\r\n                                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"12\" height=\"12\">\r\n                                      <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\"/>\r\n                                      <path d=\"M8 21h8M12 17v4\"/>\r\n                                    </svg>\r\n                                    {machine.subMachineCount} machines\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"machine-card-actions\">\r\n                              <button \r\n                                className=\"card-action-btn edit\"\r\n                                onClick={() => setEditingMachine(machine)}\r\n                                title=\"Edit machine\"\r\n                              >\r\n                                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                  <path d=\"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7\" />\r\n                                  <path d=\"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z\" />\r\n                                </svg>\r\n                              </button>\r\n                              <button \r\n                                className=\"card-action-btn delete\"\r\n                                onClick={() => handleDeleteMachine(machine)}\r\n                                title=\"Delete machine\"\r\n                              >\r\n                                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                  <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\r\n                                </svg>\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          \r\n                          <div className=\"machine-quick-status\">\r\n                            <span className=\"quick-status-label\">Quick Status:</span>\r\n                            <div className=\"quick-status-buttons\">\r\n                              <button \r\n                                className={`quick-btn running ${machine.status === 'running' ? 'active' : ''}`}\r\n                                onClick={() => handleStatusChange(machine.id, 'running')}\r\n                              >\r\n                                ▶ Run\r\n                              </button>\r\n                              <button \r\n                                className={`quick-btn idle ${machine.status === 'idle' ? 'active' : ''}`}\r\n                                onClick={() => handleStatusChange(machine.id, 'idle')}\r\n                              >\r\n                                ◼ Idle\r\n                              </button>\r\n                              <button \r\n                                className={`quick-btn maintenance ${machine.status === 'maintenance' ? 'active' : ''}`}\r\n                                onClick={() => handleStatusChange(machine.id, 'maintenance')}\r\n                              >\r\n                                ⚠ Maint\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </motion.div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            ) : (\r\n              /* Add New Machine Form */\r\n              <div className=\"add-machine-form-v2\">\r\n                <div className=\"form-section\">\r\n                  <label className=\"form-label\">\r\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"16\" height=\"16\">\r\n                      <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"/>\r\n                      <circle cx=\"12\" cy=\"7\" r=\"4\"/>\r\n                    </svg>\r\n                    Machine Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-input\"\r\n                    placeholder=\"e.g., Universal 2, CNC Mill 1...\"\r\n                    value={newMachineName}\r\n                    onChange={e => setNewMachineName(e.target.value)}\r\n                    autoFocus\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-section\">\r\n                  <label className=\"form-label\">\r\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"16\" height=\"16\">\r\n                      <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                      <path d=\"M12 6v6l4 2\"/>\r\n                    </svg>\r\n                    Initial Status\r\n                  </label>\r\n                  <div className=\"status-picker\">\r\n                    {(['running', 'idle', 'maintenance'] as const).map(status => (\r\n                      <button\r\n                        key={status}\r\n                        className={`status-picker-btn ${status} ${newMachineStatus === status ? 'selected' : ''}`}\r\n                        onClick={() => setNewMachineStatus(status)}\r\n                      >\r\n                        <span className=\"picker-icon\">{getStatusIcon(status)}</span>\r\n                        <span className=\"picker-label\">{status.charAt(0).toUpperCase() + status.slice(1)}</span>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-section\">\r\n                  <label className=\"form-label\">\r\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"16\" height=\"16\">\r\n                      <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\r\n                      <path d=\"M8 21h8M12 17v4\"/>\r\n                    </svg>\r\n                    Sub-machines (Optional)\r\n                  </label>\r\n                  <p className=\"form-hint\">If this is a group name for multiple machines, select how many.</p>\r\n                  <select\r\n                    className=\"form-select\"\r\n                    value={newMachineSubCount}\r\n                    onChange={e => setNewMachineSubCount(parseInt(e.target.value))}\r\n                  >\r\n                    <option value=\"0\">None - This is a single machine</option>\r\n                    <option value=\"2\">2 sub-machines</option>\r\n                    <option value=\"3\">3 sub-machines</option>\r\n                    <option value=\"4\">4 sub-machines</option>\r\n                    <option value=\"5\">5 sub-machines</option>\r\n                    <option value=\"6\">6 sub-machines</option>\r\n                    <option value=\"8\">8 sub-machines</option>\r\n                    <option value=\"10\">10 sub-machines</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"form-actions\">\r\n                  <button className=\"form-submit-btn\" onClick={handleAddMachine}>\r\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"18\" height=\"18\">\r\n                      <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                      <path d=\"M12 8v8M8 12h8\"/>\r\n                    </svg>\r\n                    Add Machine\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"settings-modal-footer\">\r\n            <button className=\"settings-done-btn\" onClick={onClose}>\r\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"18\" height=\"18\">\r\n                <path d=\"M20 6L9 17l-5-5\"/>\r\n              </svg>\r\n              Done\r\n            </button>\r\n          </div>\r\n        </motion.div>\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default MachineSettingsModal;\r\n","import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Machine } from '../types';\r\n\r\ninterface SubMachineModalProps {\r\n  isOpen: boolean;\r\n  machine: Machine | null;\r\n  onClose: () => void;\r\n  onSelectSubMachine: (machine: Machine, subMachineNumber: number, isActive: boolean) => void;\r\n  activeSubMachines?: Set<number>; // Optional set of active sub-machine numbers\r\n}\r\n\r\nconst SubMachineModal: React.FC<SubMachineModalProps> = ({\r\n  isOpen,\r\n  machine,\r\n  onClose,\r\n  onSelectSubMachine,\r\n  activeSubMachines = new Set(),\r\n}) => {\r\n  if (!isOpen || !machine || !machine.subMachineCount) return null;\r\n\r\n  const subMachines = Array.from({ length: machine.subMachineCount }, (_, i) => i + 1);\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div\r\n          className=\"sub-machine-overlay\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          onClick={onClose}\r\n        >\r\n          <motion.div\r\n            className=\"sub-machine-modal\"\r\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"sub-machine-header\">\r\n              <div className=\"sub-machine-title\">\r\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"24\" height=\"24\">\r\n                  <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\" />\r\n                  <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\" />\r\n                  <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\" />\r\n                </svg>\r\n                <div>\r\n                  <h2>{machine.name}</h2>\r\n                  <span className=\"sub-machine-subtitle\">Select a machine</span>\r\n                </div>\r\n              </div>\r\n              <button className=\"sub-machine-close\" onClick={onClose}>\r\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"20\" height=\"20\">\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"sub-machine-grid\">\r\n              {subMachines.map((num) => {\r\n                const isActive = activeSubMachines.has(num);\r\n                return (\r\n                  <motion.button\r\n                    key={num}\r\n                    className={`sub-machine-btn ${isActive ? 'busy' : ''}`}\r\n                    onClick={() => onSelectSubMachine(machine, num, isActive)}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                    title={isActive ? 'In Use - Click to continue' : 'Available'}\r\n                  >\r\n                    <div className=\"sub-machine-icon\">\r\n                      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" width=\"32\" height=\"32\">\r\n                        <rect x=\"3\" y=\"4\" width=\"18\" height=\"12\" rx=\"2\" />\r\n                        <path d=\"M7 20h10\" />\r\n                        <path d=\"M9 16v4\" />\r\n                        <path d=\"M15 16v4\" />\r\n                        <circle cx=\"12\" cy=\"10\" r=\"2\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"sub-machine-info\">\r\n                      <span className=\"sub-machine-name\">Machine {num}</span>\r\n                      <span className=\"sub-machine-label\">{machine.name}</span>\r\n                    </div>\r\n                    <div className=\"sub-machine-arrow\">\r\n                      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"20\" height=\"20\">\r\n                        <path d=\"M5 12h14M12 5l7 7-7 7\" />\r\n                      </svg>\r\n                    </div>\r\n                  </motion.button>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            <div className=\"sub-machine-footer\">\r\n              <button className=\"sub-machine-cancel\" onClick={onClose}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default SubMachineModal;\r\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { format } from 'date-fns';\r\nimport { getMachinesData, getTodayStats, getShiftHistory, initializeMachines, subscribeToMachineUpdates, maybeRunCleanup, retryFailedSubmissions, getFailedSubmissions } from '../lib/storage';\r\nimport { fetchActiveSessions, subscribeToSessionChanges, LiveSession } from '../lib/liveSession';\r\nimport { isSupabaseConfigured, supabase } from '../lib/supabase';\r\nimport { Machine, ShiftData } from '../types';\r\nimport MachineSettingsModal from '../components/MachineSettingsModal';\r\nimport SubMachineModal from '../components/SubMachineModal';\r\n\r\n// Animated number component\r\nconst AnimatedNumber: React.FC<{ value: number; decimals?: number; suffix?: string }> = ({\r\n  value, decimals = 0, suffix = ''\r\n}) => {\r\n  const [displayValue, setDisplayValue] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const duration = 1000;\r\n    const steps = 30;\r\n    const increment = value / steps;\r\n    let current = 0;\r\n\r\n    const timer = setInterval(() => {\r\n      current += increment;\r\n      if (current >= value) {\r\n        setDisplayValue(value);\r\n        clearInterval(timer);\r\n      } else {\r\n        setDisplayValue(current);\r\n      }\r\n    }, duration / steps);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [value]);\r\n\r\n  return <>{displayValue.toFixed(decimals)}{suffix}</>;\r\n};\r\n\r\n// Pulse animation for live indicator\r\nconst PulseIndicator: React.FC<{ color: string }> = ({ color }) => (\r\n  <span className=\"pulse-indicator\">\r\n    <span className=\"pulse-dot\" style={{ backgroundColor: color }}></span>\r\n    <span className=\"pulse-ring\" style={{ borderColor: color }}></span>\r\n  </span>\r\n);\r\n\r\nconst Dashboard: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [currentTime, setCurrentTime] = useState(new Date());\r\n  const [shift, setShift] = useState('');\r\n  const [machines, setMachines] = useState<Machine[]>([]);\r\n  const [todayStats, setTodayStats] = useState({ totalWaste: 0, totalDowntime: 0, submissionCount: 0 });\r\n  const [recentHistory, setRecentHistory] = useState<ShiftData[]>([]);\r\n  const [selectedView, setSelectedView] = useState<'grid' | 'list'>('grid');\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [selectedMachineForSub, setSelectedMachineForSub] = useState<Machine | null>(null);\r\n  const [, setIsLoading] = useState(true); // Used only for setting, UI shows content after load\r\n  const [multiSelectMode, setMultiSelectMode] = useState(false);\r\n  const [selectedMachines, setSelectedMachines] = useState<string[]>([]);\r\n  const [activeSessions, setActiveSessions] = useState<LiveSession[]>([]);\r\n  const longPressTimerRef = React.useRef<NodeJS.Timeout | null>(null);\r\n  const LONG_PRESS_DURATION = 500; // ms\r\n\r\n  // Cleanup long-press timer on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (longPressTimerRef.current) {\r\n        clearTimeout(longPressTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Helper function to detect active sub-machine sessions\r\n  // live_sessions is the source of truth for cross-browser sync\r\n  // localStorage is only used as offline fallback\r\n  const getActiveSubMachines = useCallback((machineName: string, subMachineCount: number, _machineId?: string): Set<number> => {\r\n    const activeSet = new Set<number>();\r\n\r\n    // Check Supabase live_sessions - this is the source of truth\r\n    for (let i = 1; i <= subMachineCount; i++) {\r\n      const fullName = `${machineName} - Machine ${i}`;\r\n      const isActive = activeSessions.some(s => s.machine_name === fullName && s.is_locked);\r\n      if (isActive) {\r\n        activeSet.add(i);\r\n      }\r\n    }\r\n\r\n    // If no Supabase data, fallback to localStorage (offline mode only)\r\n    if (activeSet.size === 0 && !isSupabaseConfigured) {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const hours = new Date().getUTCHours() + 2;\r\n      const currentShift = hours >= 6 && hours < 18 ? 'Day' : 'Night';\r\n\r\n      for (let i = 1; i <= subMachineCount; i++) {\r\n        const fullName = `${machineName} - Machine ${i}`;\r\n        const sessionKey = `shift_session_${fullName}_${currentShift}_${today}`;\r\n        const session = localStorage.getItem(sessionKey);\r\n        if (session) {\r\n          try {\r\n            const parsed = JSON.parse(session);\r\n            if (parsed.locked) activeSet.add(i);\r\n          } catch (e) {\r\n            console.warn(`Invalid session data for ${fullName}:`, e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return activeSet;\r\n  }, [activeSessions]);\r\n\r\n  const loadData = useCallback(() => {\r\n    const machineData = getMachinesData();\r\n    setMachines(machineData);\r\n\r\n    const stats = getTodayStats();\r\n    setTodayStats(stats);\r\n\r\n    const history = getShiftHistory().slice(0, 7);\r\n    setRecentHistory(history);\r\n  }, []);\r\n\r\n  // Initialize machines from Supabase on mount\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        // Run daily cleanup if needed\r\n        maybeRunCleanup();\r\n\r\n        const machineData = await initializeMachines();\r\n        setMachines(machineData);\r\n\r\n        const stats = getTodayStats();\r\n        setTodayStats(stats);\r\n\r\n        const history = getShiftHistory().slice(0, 7);\r\n        setRecentHistory(history);\r\n\r\n        // Fetch active sessions from Supabase for cross-browser sync\r\n        const sessions = await fetchActiveSessions();\r\n        setActiveSessions(sessions);\r\n\r\n        // Retry any failed submissions in background\r\n        const failedCount = getFailedSubmissions().length;\r\n        if (failedCount > 0) {\r\n          console.log(`Retrying ${failedCount} failed submissions...`);\r\n          retryFailedSubmissions().then(result => {\r\n            if (result.succeeded > 0) {\r\n              console.log(`Successfully synced ${result.succeeded} previously failed submissions`);\r\n            }\r\n            if (result.remaining > 0) {\r\n              console.warn(`${result.remaining} submissions still pending retry`);\r\n            }\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to initialize:', error);\r\n        loadData(); // Fallback to localStorage\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    init();\r\n\r\n    // Subscribe to real-time machine updates\r\n    const unsubscribeMachines = subscribeToMachineUpdates((updatedMachines) => {\r\n      console.log('Real-time update received:', updatedMachines.length, 'machines');\r\n      setMachines(updatedMachines);\r\n    });\r\n\r\n    // Subscribe to real-time session updates for cross-browser sync\r\n    const unsubscribeSessions = subscribeToSessionChanges((sessions) => {\r\n      console.log('🔄 Session update received:', sessions.length, 'active sessions', sessions.map(s => s.machine_name));\r\n      setActiveSessions(sessions);\r\n    });\r\n\r\n    return () => {\r\n      unsubscribeMachines();\r\n      unsubscribeSessions();\r\n    };\r\n  }, [loadData]);\r\n\r\n  // Update time every second - no dependencies to avoid infinite recreation\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      const now = new Date();\r\n      setCurrentTime(now);\r\n      // Update shift based on current time\r\n      const hours = now.getUTCHours() + 2;\r\n      setShift(hours >= 6 && hours < 18 ? 'Day' : 'Night');\r\n    }, 1000);\r\n\r\n    // Set initial shift\r\n    const initialHours = new Date().getUTCHours() + 2;\r\n    setShift(initialHours >= 6 && initialHours < 18 ? 'Day' : 'Night');\r\n\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  const handleMachineClick = (machine: Machine) => {\r\n    if (machine.status === 'maintenance') return;\r\n\r\n    // If machine has sub-machines, show the selection modal\r\n    if (machine.subMachineCount && machine.subMachineCount > 0) {\r\n      setSelectedMachineForSub(machine);\r\n    } else {\r\n      navigate(`/capture/${machine.id}`, { state: { machineName: machine.name } });\r\n    }\r\n  };\r\n\r\n  const handleSubMachineSelect = (machine: Machine, subMachineNumber: number, isActive: boolean) => {\r\n    const fullName = `${machine.name} - Machine ${subMachineNumber}`;\r\n\r\n    // Note: isActive is for visual display only - machine is still clickable to continue session\r\n\r\n    if (multiSelectMode) {\r\n      // Only allow selection from the same parent group\r\n      if (selectedMachines.length > 0) {\r\n        const firstSelectedParent = selectedMachines[0].split(' - ')[0];\r\n        if (machine.name !== firstSelectedParent) {\r\n          // Different group - don't allow\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Toggle selection\r\n      setSelectedMachines(prev =>\r\n        prev.includes(fullName)\r\n          ? prev.filter(m => m !== fullName)\r\n          : [...prev, fullName]\r\n      );\r\n    } else {\r\n      // Direct navigation - use submachine ID for proper status tracking\r\n      const subMachineId = `${machine.id}-sub-${subMachineNumber}`;\r\n      navigate(`/capture/${subMachineId}`, {\r\n        state: {\r\n          machineName: fullName,\r\n          parentMachine: machine.name,\r\n          parentMachineId: machine.id,\r\n          subMachineNumber: subMachineNumber,\r\n          subMachineId: subMachineId\r\n        }\r\n      });\r\n    }\r\n    setSelectedMachineForSub(null);\r\n  };\r\n\r\n  const handleStartMultiCapture = () => {\r\n    if (selectedMachines.length === 0) return;\r\n\r\n    // Extract parent group from first selected machine\r\n    const parentGroup = selectedMachines[0].split(' - ')[0];\r\n\r\n    navigate(`/capture/multi`, {\r\n      state: {\r\n        machineNames: selectedMachines,\r\n        parentGroup: parentGroup,\r\n        isMultiMachine: true\r\n      }\r\n    });\r\n  };\r\n\r\n  // Long-press handlers for entering multi-select mode\r\n  const handleLongPressStart = (machine: Machine, subMachineNumber: number, isActive: boolean) => {\r\n    // isActive is kept for future use but doesn't block interaction\r\n    const fullName = `${machine.name} - Machine ${subMachineNumber}`;\r\n\r\n    longPressTimerRef.current = setTimeout(() => {\r\n      // Enter multi-select mode and select this machine\r\n      setMultiSelectMode(true);\r\n      setSelectedMachines([fullName]);\r\n    }, LONG_PRESS_DURATION);\r\n  };\r\n\r\n  const handleLongPressEnd = () => {\r\n    if (longPressTimerRef.current) {\r\n      clearTimeout(longPressTimerRef.current);\r\n      longPressTimerRef.current = null;\r\n    }\r\n  };\r\n\r\n  const cancelMultiSelect = () => {\r\n    setMultiSelectMode(false);\r\n    setSelectedMachines([]);\r\n  };\r\n\r\n  // Get the parent group of currently selected machines (for highlighting)\r\n  const selectedParentGroup = selectedMachines.length > 0\r\n    ? selectedMachines[0].split(' - ')[0]\r\n    : null;\r\n\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'running': return '#00ff88';\r\n      case 'idle': return '#00f5ff';\r\n      case 'maintenance': return '#ff4757';\r\n      default: return '#00f5ff';\r\n    }\r\n  };\r\n\r\n  const getStatusGradient = (status: string) => {\r\n    switch (status) {\r\n      case 'running': return 'linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)';\r\n      case 'idle': return 'linear-gradient(135deg, #00f5ff 0%, #00c4cc 100%)';\r\n      case 'maintenance': return 'linear-gradient(135deg, #ff4757 0%, #cc3945 100%)';\r\n      default: return 'linear-gradient(135deg, #00f5ff 0%, #00c4cc 100%)';\r\n    }\r\n  };\r\n\r\n  // Calculate efficiency (mock calculation - running / total * 100)\r\n  const efficiency = useMemo(() => {\r\n    const running = machines.filter(m => m.status === 'running').length;\r\n    const total = machines.filter(m => m.status !== 'maintenance').length;\r\n    return total > 0 ? Math.round((running / total) * 100) : 0;\r\n  }, [machines]);\r\n\r\n  const runningCount = machines.filter(m => m.status === 'running').length;\r\n  const idleCount = machines.filter(m => m.status === 'idle').length;\r\n  const maintenanceCount = machines.filter(m => m.status === 'maintenance').length;\r\n\r\n  return (\r\n    <div className=\"dashboard-v2\">\r\n      {/* Top Navigation Bar */}\r\n      <header className=\"top-nav\">\r\n        <div className=\"nav-brand\">\r\n          <div className=\"brand-icon\">\r\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"brand-text\">\r\n            <span className=\"brand-name\">Production Control</span>\r\n            <span className=\"brand-subtitle\">Waste & Downtime Tracking</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"nav-center\">\r\n          <div className=\"live-clock\">\r\n            <PulseIndicator color=\"#10b981\" />\r\n            <span className=\"clock-time\">{format(currentTime, 'HH:mm:ss')}</span>\r\n            <span className=\"clock-date\">{format(currentTime, 'dd MMM yyyy')}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"nav-actions\">\r\n          <div className={`shift-indicator ${shift.toLowerCase()}`}>\r\n            <span className=\"shift-icon\">{shift === 'Day' ? '◐' : '◑'}</span>\r\n            <span className=\"shift-text\">{shift} Shift</span>\r\n          </div>\r\n          <button className=\"nav-btn admin-btn\" onClick={() => navigate('/admin')}>\r\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"18\" height=\"18\">\r\n              <path d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\r\n            </svg>\r\n            Admin\r\n          </button>\r\n          <button className=\"nav-btn\" onClick={() => navigate('/history')}>\r\n            History\r\n          </button>\r\n          <button className=\"nav-btn settings-btn\" onClick={() => setShowSettings(true)}>\r\n            <svg className=\"settings-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"20\" height=\"20\">\r\n              <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n              <path d=\"M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83\" />\r\n            </svg>\r\n            <span className=\"settings-text\">Settings</span>\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Machine Settings Modal */}\r\n      <MachineSettingsModal\r\n        isOpen={showSettings}\r\n        onClose={() => setShowSettings(false)}\r\n        onMachinesUpdated={loadData}\r\n      />\r\n\r\n      {/* Sub-Machine Selection Modal */}\r\n      <SubMachineModal\r\n        isOpen={!!selectedMachineForSub}\r\n        machine={selectedMachineForSub}\r\n        onClose={() => setSelectedMachineForSub(null)}\r\n        onSelectSubMachine={handleSubMachineSelect}\r\n        activeSubMachines={selectedMachineForSub ? getActiveSubMachines(selectedMachineForSub.name, selectedMachineForSub.subMachineCount || 0, selectedMachineForSub.id) : new Set()}\r\n      />\r\n\r\n      <main className=\"dashboard-main\">\r\n        {/* Left Panel - Stats */}\r\n        <aside className=\"stats-panel\">\r\n          {/* Efficiency Gauge */}\r\n          <div className=\"efficiency-card\">\r\n            <div className=\"efficiency-ring\">\r\n              <svg viewBox=\"0 0 120 120\">\r\n                <circle cx=\"60\" cy=\"60\" r=\"50\" className=\"ring-bg\" />\r\n                <circle\r\n                  cx=\"60\" cy=\"60\" r=\"50\"\r\n                  className=\"ring-progress\"\r\n                  strokeDasharray={`${efficiency * 3.14} 314`}\r\n                  style={{ stroke: efficiency > 70 ? '#10b981' : efficiency > 40 ? '#f59e0b' : '#ef4444' }}\r\n                />\r\n              </svg>\r\n              <div className=\"efficiency-value\">\r\n                <AnimatedNumber value={efficiency} suffix=\"%\" />\r\n              </div>\r\n            </div>\r\n            <span className=\"efficiency-label\">Line Efficiency</span>\r\n          </div>\r\n\r\n          {/* Quick Stats */}\r\n          <div className=\"quick-stats\">\r\n            <div className=\"stat-item running\">\r\n              <div className=\"stat-indicator\"></div>\r\n              <div className=\"stat-info\">\r\n                <span className=\"stat-value\">{runningCount}</span>\r\n                <span className=\"stat-label\">Running</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"stat-item idle\">\r\n              <div className=\"stat-indicator\"></div>\r\n              <div className=\"stat-info\">\r\n                <span className=\"stat-value\">{idleCount}</span>\r\n                <span className=\"stat-label\">Idle</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"stat-item maintenance\">\r\n              <div className=\"stat-indicator\"></div>\r\n              <div className=\"stat-info\">\r\n                <span className=\"stat-value\">{maintenanceCount}</span>\r\n                <span className=\"stat-label\">Maintenance</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </aside>\r\n\r\n        {/* Main Content - Machine Grid */}\r\n        <section className={`machines-section ${multiSelectMode ? 'multi-select-mode' : ''}`}>\r\n          <div className=\"section-header\">\r\n            <h2>\r\n              Production Lines\r\n              {multiSelectMode && <span className=\"multi-select-hint\"> — Hold to select machines</span>}\r\n            </h2>\r\n            <div className=\"header-actions\">\r\n              {multiSelectMode && (\r\n                <button\r\n                  className=\"cancel-select-btn\"\r\n                  onClick={cancelMultiSelect}\r\n                >\r\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"18\" height=\"18\">\r\n                    <path d=\"M18 6L6 18M6 6l12 12\" />\r\n                  </svg>\r\n                  Cancel\r\n                </button>\r\n              )}\r\n              <div className=\"view-toggle\">\r\n                <button\r\n                  className={selectedView === 'grid' ? 'active' : ''}\r\n                  onClick={() => setSelectedView('grid')}\r\n                >\r\n                  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"18\" height=\"18\">\r\n                    <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\" />\r\n                    <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\" />\r\n                    <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\" />\r\n                    <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\" />\r\n                  </svg>\r\n                </button>\r\n                <button\r\n                  className={selectedView === 'list' ? 'active' : ''}\r\n                  onClick={() => setSelectedView('list')}\r\n                >\r\n                  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"18\" height=\"18\">\r\n                    <rect x=\"3\" y=\"4\" width=\"18\" height=\"4\" rx=\"1\" />\r\n                    <rect x=\"3\" y=\"10\" width=\"18\" height=\"4\" rx=\"1\" />\r\n                    <rect x=\"3\" y=\"16\" width=\"18\" height=\"4\" rx=\"1\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            {selectedView === 'grid' ? (\r\n              <motion.div\r\n                key=\"grid\"\r\n                className=\"machines-grid-v2\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n              >\r\n                {machines.map((machine, index) => {\r\n                  // Machine is running if status is 'running' OR has a current order\r\n                  const isRunning = machine.status === 'running' || !!machine.currentOrder;\r\n                  const isBlocked = isRunning || machine.status === 'maintenance';\r\n                  const displayStatus = isRunning ? 'running' : machine.status;\r\n                  const activeSubMachines = machine.subMachineCount && machine.subMachineCount > 0\r\n                    ? getActiveSubMachines(machine.name, machine.subMachineCount, machine.id)\r\n                    : new Set<number>();\r\n\r\n                  const handleTileClick = () => {\r\n                    if (machine.subMachineCount && machine.subMachineCount > 0) return;\r\n                    // Allow access to running machines (to continue session)\r\n                    handleMachineClick(machine);\r\n                  };\r\n\r\n                  return (\r\n                    <motion.div\r\n                      key={machine.id}\r\n                      className={`machine-tile ${displayStatus} ${isBlocked ? 'disabled' : ''} ${machine.subMachineCount && machine.subMachineCount > 0 ? 'has-sub-machines' : ''}`}\r\n                      initial={{ opacity: 0, scale: 0.9 }}\r\n                      animate={{ opacity: 1, scale: 1 }}\r\n                      transition={{ delay: index * 0.05 }}\r\n                      onClick={handleTileClick}\r\n                      whileHover={!isBlocked && !(machine.subMachineCount && machine.subMachineCount > 0) ? { scale: 1.02, y: -4 } : {}}\r\n                      whileTap={!isBlocked && !(machine.subMachineCount && machine.subMachineCount > 0) ? { scale: 0.98 } : {}}\r\n                    >\r\n                      <div\r\n                        className=\"tile-glow\"\r\n                        style={{ background: getStatusGradient(displayStatus) }}\r\n                      />\r\n                      <div className=\"tile-content\">\r\n                        <div className=\"tile-header\">\r\n                          <span className=\"tile-name\">{machine.name}</span>\r\n                          <div className=\"tile-status\">\r\n                            <PulseIndicator color={getStatusColor(displayStatus)} />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"tile-status-text\">\r\n                          {isRunning ? 'Running' : machine.status.charAt(0).toUpperCase() + machine.status.slice(1)}\r\n                          {machine.subMachineCount && machine.subMachineCount > 0 && (\r\n                            <span className=\"sub-count-badge\">\r\n                              {activeSubMachines.size > 0\r\n                                ? `${activeSubMachines.size}/${machine.subMachineCount} active`\r\n                                : `${machine.subMachineCount} units`}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* For group machines: show info for each active member */}\r\n                        {machine.subMachineCount && machine.subMachineCount > 0 && activeSubMachines.size > 0 ? (\r\n                          <div className=\"active-members-info\">\r\n                            {Array.from(activeSubMachines).sort((a, b) => a - b).map(num => {\r\n                              const memberName = `${machine.name} - Machine ${num}`;\r\n                              const memberSession = activeSessions.find(s => s.machine_name === memberName);\r\n                              return (\r\n                                <div key={num} className=\"member-info\">\r\n                                  <span className=\"member-label\">M{num}:</span>\r\n                                  {memberSession ? (\r\n                                    <>\r\n                                      <span className=\"member-order\">{memberSession.order_number}</span>\r\n                                      <span className=\"member-operator\">({memberSession.operator_name})</span>\r\n                                    </>\r\n                                  ) : (\r\n                                    <span className=\"member-order\">Active</span>\r\n                                  )}\r\n                                </div>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                        ) : (\r\n                          <>\r\n                            {/* Show current order if running (single machine) */}\r\n                            {isRunning && machine.currentOrder && (\r\n                              <div className=\"tile-order\">Order: {machine.currentOrder}</div>\r\n                            )}\r\n                            {machine.currentOperator && (\r\n                              <div className=\"tile-operator\">{machine.currentOperator}</div>\r\n                            )}\r\n                          </>\r\n                        )}\r\n\r\n                        {/* Today's Stats - Waste & Downtime */}\r\n                        {machine.subMachineCount && machine.subMachineCount > 0 && activeSubMachines.size > 0 ? (\r\n                          <div className=\"members-stats\">\r\n                            {Array.from(activeSubMachines).sort((a, b) => a - b).map(num => {\r\n                              const memberName = `${machine.name} - Machine ${num}`;\r\n                              const memberSession = activeSessions.find(s => s.machine_name === memberName);\r\n                              const memberWaste = memberSession?.total_waste || 0;\r\n                              const memberDowntime = memberSession?.total_downtime || 0;\r\n                              return (\r\n                                <div key={num} className=\"member-stats-row\">\r\n                                  <span className=\"member-label\">M{num}:</span>\r\n                                  <div className=\"tile-stat waste\">\r\n                                    <span className=\"stat-icon\">🗑️</span>\r\n                                    <span className=\"stat-value\">{memberWaste.toFixed(1)}</span>\r\n                                    <span className=\"stat-unit\">kg</span>\r\n                                  </div>\r\n                                  <div className=\"tile-stat downtime\">\r\n                                    <span className=\"stat-icon\">⏱️</span>\r\n                                    <span className=\"stat-value\">{memberDowntime}</span>\r\n                                    <span className=\"stat-unit\">min</span>\r\n                                  </div>\r\n                                </div>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"tile-stats\">\r\n                            <div className=\"tile-stat waste\">\r\n                              <span className=\"stat-icon\">🗑️</span>\r\n                              <span className=\"stat-value\">{machine.todayWaste?.toFixed(1) || '0.0'}</span>\r\n                              <span className=\"stat-unit\">kg</span>\r\n                            </div>\r\n                            <div className=\"tile-stat downtime\">\r\n                              <span className=\"stat-icon\">⏱️</span>\r\n                              <span className=\"stat-value\">{machine.todayDowntime || 0}</span>\r\n                              <span className=\"stat-unit\">min</span>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Inline sub-machine selection */}\r\n                        {machine.subMachineCount && machine.subMachineCount > 0 && machine.status !== 'maintenance' ? (\r\n                          <div className=\"sub-machine-inline-grid\">\r\n                            {Array.from({ length: machine.subMachineCount }, (_, i) => i + 1).map(num => {\r\n                              const fullName = `${machine.name} - Machine ${num}`;\r\n                              const isActive = activeSubMachines.has(num);\r\n                              const isSelected = selectedMachines.includes(fullName);\r\n                              const isOtherGroup = Boolean(multiSelectMode && selectedParentGroup && selectedParentGroup !== machine.name);\r\n                              // Only disable for other-group, NOT for isActive (reserved machines are still clickable)\r\n                              const isDisabled = isOtherGroup;\r\n\r\n                              return (\r\n                                <motion.button\r\n                                  key={num}\r\n                                  className={`sub-machine-inline-btn ${isActive ? 'busy' : ''} ${isSelected ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}`}\r\n                                  onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    handleSubMachineSelect(machine, num, isActive);\r\n                                  }}\r\n                                  onMouseDown={() => handleLongPressStart(machine, num, isActive)}\r\n                                  onMouseUp={handleLongPressEnd}\r\n                                  onMouseLeave={handleLongPressEnd}\r\n                                  onTouchStart={() => handleLongPressStart(machine, num, isActive)}\r\n                                  onTouchEnd={handleLongPressEnd}\r\n                                  whileHover={!isDisabled ? { scale: 1.1 } : {}}\r\n                                  whileTap={!isDisabled ? { scale: 0.95 } : {}}\r\n                                  title={isActive ? 'In Use - Click to continue' : (isOtherGroup ? 'Different group' : (multiSelectMode ? 'Tap to select' : 'Hold to multi-select'))}\r\n                                  disabled={isDisabled}\r\n                                >\r\n                                  {num}\r\n                                  {isActive && <span className=\"status-dot busy\" />}\r\n                                  {isSelected && <span className=\"check-mark\">✓</span>}\r\n                                </motion.button>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"tile-footer\">\r\n                            <span className=\"tile-time\">{machine.lastSubmission || 'No entries'}</span>\r\n                            {machine.status !== 'maintenance' && (\r\n                              <span className=\"tile-action\">Record →</span>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </motion.div>\r\n                  );\r\n                })}\r\n              </motion.div>\r\n            ) : (\r\n              <motion.div\r\n                key=\"list\"\r\n                className=\"machines-list\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n              >\r\n                {machines.map((machine, index) => (\r\n                  <motion.div\r\n                    key={machine.id}\r\n                    className={`machine-row ${machine.status} ${machine.status === 'maintenance' ? 'disabled' : ''}`}\r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.03 }}\r\n                    onClick={() => handleMachineClick(machine)}\r\n                  >\r\n                    <div className=\"row-indicator\" style={{ background: getStatusGradient(machine.status) }} />\r\n                    <div className=\"row-name\">{machine.name}</div>\r\n                    <div className=\"row-status\">\r\n                      <PulseIndicator color={getStatusColor(machine.status)} />\r\n                      <span>{machine.status.charAt(0).toUpperCase() + machine.status.slice(1)}</span>\r\n                    </div>\r\n                    <div className=\"row-operator\">{machine.currentOperator || '—'}</div>\r\n                    <div className=\"row-time\">{machine.lastSubmission || 'No entries'}</div>\r\n                    {machine.status !== 'maintenance' && (\r\n                      <button className=\"row-action\">Record</button>\r\n                    )}\r\n                  </motion.div>\r\n                ))}\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          {/* Multi-Select Floating Action Bar */}\r\n          <AnimatePresence>\r\n            {multiSelectMode && selectedMachines.length > 0 && (\r\n              <motion.div\r\n                className=\"multi-select-bar\"\r\n                initial={{ opacity: 0, y: 50 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: 50 }}\r\n              >\r\n                <div className=\"selection-info\">\r\n                  <span className=\"selection-parent-group\">{selectedParentGroup}</span>\r\n                  <span className=\"selection-divider\">—</span>\r\n                  <span className=\"selection-machines\">\r\n                    {selectedMachines.map(m => m.split(' - Machine ')[1]).join(', ')}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  className=\"start-capture-btn\"\r\n                  onClick={handleStartMultiCapture}\r\n                >\r\n                  Start Recording ({selectedMachines.length})\r\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" width=\"20\" height=\"20\">\r\n                    <path d=\"M5 12h14M12 5l7 7-7 7\" />\r\n                  </svg>\r\n                </button>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </section>\r\n\r\n        {/* Right Panel - Recent Activity */}\r\n        <aside className=\"overview-panel\">\r\n          {/* Recent Activity */}\r\n          <div className=\"recent-activity\">\r\n            <h3 className=\"section-title\">Recent Submissions</h3>\r\n            <div className=\"activity-list\">\r\n              {recentHistory.slice(0, 5).map((item, index) => (\r\n                <motion.div\r\n                  key={item.id || index}\r\n                  className=\"activity-item\"\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: index * 0.1 }}\r\n                >\r\n                  <div className=\"activity-icon\">\r\n                    <span className=\"icon-dot\"></span>\r\n                  </div>\r\n                  <div className=\"activity-details\">\r\n                    <span className=\"activity-machine\">{item.machine}</span>\r\n                    <span className=\"activity-meta\">\r\n                      {item.totalWaste.toFixed(1)}kg waste · {item.totalDowntime}m downtime\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"activity-time\">\r\n                    {format(new Date(item.submittedAt), 'HH:mm')}\r\n                  </div>\r\n                </motion.div>\r\n              ))}\r\n              {recentHistory.length === 0 && (\r\n                <div className=\"activity-empty\">No recent activity</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </aside>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction _v4(options, buf, offset) {\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    return _v4(options, buf, offset);\n}\nexport default v4;\n"],"names":["_ref","isOpen","onClose","onMachinesUpdated","machines","setMachines","useState","editingMachine","setEditingMachine","setIsAddingNew","newMachineName","setNewMachineName","newMachineStatus","setNewMachineStatus","newMachineSubCount","setNewMachineSubCount","toast","setToast","activeTab","setActiveTab","setIsSaving","useEffect","loadMachines","data","getMachinesData","showToast","message","type","setTimeout","handleStatusChange","async","machineId","newStatus","find","m","id","updateMachine","status","error","getStatusColor","getStatusIcon","_jsx","AnimatePresence","children","motion","div","className","initial","opacity","animate","exit","onClick","_jsxs","scale","y","e","stopPropagation","viewBox","fill","stroke","strokeWidth","cx","cy","r","d","length","concat","width","height","x","rx","ry","map","machine","index","transition","delay","value","name","onChange","_objectSpread","target","autoFocus","charAt","toUpperCase","slice","subMachineCount","parseInt","undefined","handleUpdateMachine","_Fragment","style","backgroundColor","title","window","confirm","deleteMachine","handleDeleteMachine","placeholder","trim","newMachine","uuidv4","addMachine","onSelectSubMachine","activeSubMachines","Set","subMachines","Array","from","_","i","x1","y1","x2","y2","num","isActive","has","button","whileHover","whileTap","AnimatedNumber","decimals","suffix","displayValue","setDisplayValue","increment","current","timer","setInterval","clearInterval","toFixed","PulseIndicator","_ref2","color","borderColor","Dashboard","navigate","useNavigate","currentTime","setCurrentTime","Date","shift","setShift","todayStats","setTodayStats","totalWaste","totalDowntime","submissionCount","recentHistory","setRecentHistory","selectedView","setSelectedView","showSettings","setShowSettings","selectedMachineForSub","setSelectedMachineForSub","setIsLoading","multiSelectMode","setMultiSelectMode","selectedMachines","setSelectedMachines","activeSessions","setActiveSessions","longPressTimerRef","React","clearTimeout","getActiveSubMachines","useCallback","machineName","_machineId","activeSet","fullName","some","s","machine_name","is_locked","add","size","isSupabaseConfigured","today","toISOString","split","hours","getUTCHours","currentShift","sessionKey","session","localStorage","getItem","JSON","parse","locked","console","warn","loadData","machineData","stats","getTodayStats","history","getShiftHistory","maybeRunCleanup","initializeMachines","sessions","fetchActiveSessions","failedCount","getFailedSubmissions","log","retryFailedSubmissions","then","result","succeeded","remaining","init","unsubscribeMachines","subscribeToMachineUpdates","updatedMachines","unsubscribeSessions","subscribeToSessionChanges","now","initialHours","handleMachineClick","state","handleSubMachineSelect","subMachineNumber","firstSelectedParent","prev","includes","filter","subMachineId","parentMachine","parentMachineId","handleLongPressStart","handleLongPressEnd","selectedParentGroup","getStatusGradient","efficiency","useMemo","running","total","Math","round","runningCount","idleCount","maintenanceCount","format","toLowerCase","MachineSettingsModal","SubMachineModal","strokeDasharray","cancelMultiSelect","mode","_machine$todayWaste","isRunning","currentOrder","isBlocked","displayStatus","handleTileClick","background","sort","a","b","memberName","memberSession","order_number","operator_name","currentOperator","memberWaste","total_waste","memberDowntime","total_downtime","todayWaste","todayDowntime","isSelected","isOtherGroup","Boolean","isDisabled","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","disabled","lastSubmission","join","handleStartMultiCapture","parentGroup","machineNames","isMultiMachine","item","submittedAt","randomUUID","crypto","bind","getRandomValues","rnds8","Uint8Array","byteToHex","push","toString","unsafeStringify","arr","offset","arguments","_v4","options","buf","_options$random","_options$rng","_options","rnds","random","rng","call","Error","RangeError","native"],"ignoreList":[],"sourceRoot":""}